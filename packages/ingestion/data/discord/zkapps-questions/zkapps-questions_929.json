{
  "guild": {
    "id": "484437221055922177",
    "name": "Mina Protocol",
    "iconUrl": "https://cdn.discordapp.com/icons/484437221055922177/60f5907d2f7e3804b704a7153cae7768.png?size=512"
  },
  "channel": {
    "id": "1089627050358345789",
    "type": "GuildPublicThread",
    "categoryId": "1047214314349658172",
    "category": "zkapps-questions",
    "name": "Upgradability and state",
    "topic": null
  },
  "dateRange": {
    "after": null,
    "before": null
  },
  "exportedAt": "2025-04-24T16:47:44.2631786+04:00",
  "messages": [
    {
      "id": "1089627050358345789",
      "type": "Default",
      "timestamp": "2023-03-26T23:08:53.097+04:00",
      "timestampEdited": "2023-03-26T23:18:36.992+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Most likely I'm trying to upgrade verification key in the wrong way but I tired few ways and always end up same as on the screenshot. What is the correct way to do so?\n\nRegardless the above, it seems kinda odd that 'counter' returns different value when zkapp and zkappV2 have exactly the same address. \n\ntrying to manually set counter doesn't fail but neither is updating any of the counter as seen on screenshot, odd again\n(if I set counter via function on V2 it works)",
      "author": {
        "id": "738036747455299764",
        "name": "zkkirol",
        "discriminator": "0000",
        "nickname": "zkKirol",
        "color": "#E74C3C",
        "isBot": false,
        "roles": [
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "692003893445656606",
            "name": "Genesis Founding Member",
            "color": "#FFD170",
            "position": 114
          },
          {
            "id": "857943736289984583",
            "name": "prism-contributing-member",
            "color": "#FFEABD",
            "position": 112
          },
          {
            "id": "1204059991435251723",
            "name": "Technical Reviewer - Navigators",
            "color": "#E74C3C",
            "position": 105
          },
          {
            "id": "1249795469157335081",
            "name": "NExT",
            "color": "#B47936",
            "position": 103
          },
          {
            "id": "1010215418604040232",
            "name": "zkapp-beta-tester",
            "color": "#E06304",
            "position": 99
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          },
          {
            "id": "1344664872356679743",
            "name": "MWN-tester",
            "color": "#FFA6C9",
            "position": 39
          },
          {
            "id": "1285544625037115557",
            "name": "MinaCon",
            "color": "#FAFFD6",
            "position": 25
          },
          {
            "id": "893400661759246366",
            "name": "Applicant",
            "color": null,
            "position": 24
          },
          {
            "id": "1205541869375979601",
            "name": "UMT",
            "color": "#FFFFFF",
            "position": 22
          },
          {
            "id": "1227899957491535973",
            "name": "Delegation-Program",
            "color": "#FFFFFF",
            "position": 21
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          },
          {
            "id": "1291345674213920768",
            "name": "Rust-Node",
            "color": "#FFF7F7",
            "position": 17
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/738036747455299764/24454fe5d228acb754eb99223bf7161a.png?size=512"
      },
      "attachments": [
        {
          "id": "1089627050819731607",
          "url": "https://cdn.discordapp.com/attachments/1089627050358345789/1089627050819731607/Screenshot_from_2023-03-26_19-50-25.png?ex=680b3505&is=6809e385&hm=c4b14472d344d2a618f02ac040e9495f492b971a70afab5d0eced4df306fbf40&",
          "fileName": "Screenshot_from_2023-03-26_19-50-25.png",
          "fileSizeBytes": 245240
        }
      ],
      "embeds": [],
      "stickers": [],
      "reactions": [
        {
          "emoji": {
            "id": "",
            "name": "\uD83D\uDC4D",
            "code": "thumbsup",
            "isAnimated": false,
            "imageUrl": "https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d.svg"
          },
          "count": 2,
          "users": [
            {
              "id": "301752126491721730",
              "name": "blockbeard",
              "discriminator": "0000",
              "nickname": "angus_m",
              "isBot": false,
              "avatarUrl": "https://cdn.discordapp.com/avatars/301752126491721730/0a8d7f37a46cb3c2ca757f772e60e497.png?size=512"
            },
            {
              "id": "761650255199862784",
              "name": "blockyj_",
              "discriminator": "0000",
              "nickname": "BlockyJ",
              "isBot": false,
              "avatarUrl": "https://cdn.discordapp.com/avatars/761650255199862784/da5c3ca80c274d112ef4a7d1ddebf5b1.png?size=512"
            }
          ]
        }
      ],
      "mentions": []
    },
    {
      "id": "1089841001050415135",
      "type": "Default",
      "timestamp": "2023-03-27T13:19:02.917+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Hi Karol. Is it possible that you have not waited long enough for the V2 counter state to get updated? The transaction presumably needs to be written to a block before the update happens.",
      "author": {
        "id": "1050490454443032746",
        "name": "ejmina.",
        "discriminator": "0000",
        "nickname": "ejMina",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/1050490454443032746/0a0318733ccbd98b420ba381c738fb44.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1089891743991869450",
      "type": "Default",
      "timestamp": "2023-03-27T16:40:40.977+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "happening on LocalBlockchain, if it wouldn't get included in block then presumably the counter v2 should not come back with anything ? going to try on Berkeley now. would be great to know if that's the correct way to upgrade contract as can't see example within the repo (https://github.com/o1-labs/snarkyjs/blob/926e2a22062aa55fe2d99926372168803bac8255/src/examples/zkapps/dex/upgradability.ts#L434 only this but not really showing the correct path...)",
      "author": {
        "id": "738036747455299764",
        "name": "zkkirol",
        "discriminator": "0000",
        "nickname": "zkKirol",
        "color": "#E74C3C",
        "isBot": false,
        "roles": [
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "692003893445656606",
            "name": "Genesis Founding Member",
            "color": "#FFD170",
            "position": 114
          },
          {
            "id": "857943736289984583",
            "name": "prism-contributing-member",
            "color": "#FFEABD",
            "position": 112
          },
          {
            "id": "1204059991435251723",
            "name": "Technical Reviewer - Navigators",
            "color": "#E74C3C",
            "position": 105
          },
          {
            "id": "1249795469157335081",
            "name": "NExT",
            "color": "#B47936",
            "position": 103
          },
          {
            "id": "1010215418604040232",
            "name": "zkapp-beta-tester",
            "color": "#E06304",
            "position": 99
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          },
          {
            "id": "1344664872356679743",
            "name": "MWN-tester",
            "color": "#FFA6C9",
            "position": 39
          },
          {
            "id": "1285544625037115557",
            "name": "MinaCon",
            "color": "#FAFFD6",
            "position": 25
          },
          {
            "id": "893400661759246366",
            "name": "Applicant",
            "color": null,
            "position": 24
          },
          {
            "id": "1205541869375979601",
            "name": "UMT",
            "color": "#FFFFFF",
            "position": 22
          },
          {
            "id": "1227899957491535973",
            "name": "Delegation-Program",
            "color": "#FFFFFF",
            "position": 21
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          },
          {
            "id": "1291345674213920768",
            "name": "Rust-Node",
            "color": "#FFF7F7",
            "position": 17
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/738036747455299764/24454fe5d228acb754eb99223bf7161a.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1089912971318280213",
      "type": "Default",
      "timestamp": "2023-03-27T18:05:01.966+04:00",
      "timestampEdited": "2023-03-27T18:05:25.859+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "You could be right. But if the transaction hasn't been written to a block yet then for V2 it would just have the old state for the counter (i.e. 1), which looks to be the case. Your transaction is trying to set it to 0, but instead the value you are retrieving is 1, which is what it is set to when the transaction is first deployed. Does this make sense?",
      "author": {
        "id": "1050490454443032746",
        "name": "ejmina.",
        "discriminator": "0000",
        "nickname": "ejMina",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/1050490454443032746/0a0318733ccbd98b420ba381c738fb44.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1089913948142317648",
      "type": "Default",
      "timestamp": "2023-03-27T18:08:54.859+04:00",
      "timestampEdited": "2023-03-27T18:09:11.282+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Is it possible for you to add a `wait` with `max attempts` to line 54 (like you have on line 41) just to make sure you give it more time. Alternatively, it could be that the transaction is failing in some way.",
      "author": {
        "id": "1050490454443032746",
        "name": "ejmina.",
        "discriminator": "0000",
        "nickname": "ejMina",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/1050490454443032746/0a0318733ccbd98b420ba381c738fb44.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1089914029998350466",
      "type": "Default",
      "timestamp": "2023-03-27T18:09:14.375+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "old state was 10, and zkappv1 still returns 10 although the new verification key was set to V2\nI've added explicit function to set counter and action hash to 0 and that works, but I'm still able to call zkappV1.counter and get 10 and zkappV2.counter returns 0 \uD83D\uDE05  maybe local mina is caching the V1 and that's why it returns 10? not sure\ncurrently fighting to try run it on Berkeley",
      "author": {
        "id": "738036747455299764",
        "name": "zkkirol",
        "discriminator": "0000",
        "nickname": "zkKirol",
        "color": "#E74C3C",
        "isBot": false,
        "roles": [
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "692003893445656606",
            "name": "Genesis Founding Member",
            "color": "#FFD170",
            "position": 114
          },
          {
            "id": "857943736289984583",
            "name": "prism-contributing-member",
            "color": "#FFEABD",
            "position": 112
          },
          {
            "id": "1204059991435251723",
            "name": "Technical Reviewer - Navigators",
            "color": "#E74C3C",
            "position": 105
          },
          {
            "id": "1249795469157335081",
            "name": "NExT",
            "color": "#B47936",
            "position": 103
          },
          {
            "id": "1010215418604040232",
            "name": "zkapp-beta-tester",
            "color": "#E06304",
            "position": 99
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          },
          {
            "id": "1344664872356679743",
            "name": "MWN-tester",
            "color": "#FFA6C9",
            "position": 39
          },
          {
            "id": "1285544625037115557",
            "name": "MinaCon",
            "color": "#FAFFD6",
            "position": 25
          },
          {
            "id": "893400661759246366",
            "name": "Applicant",
            "color": null,
            "position": 24
          },
          {
            "id": "1205541869375979601",
            "name": "UMT",
            "color": "#FFFFFF",
            "position": 22
          },
          {
            "id": "1227899957491535973",
            "name": "Delegation-Program",
            "color": "#FFFFFF",
            "position": 21
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          },
          {
            "id": "1291345674213920768",
            "name": "Rust-Node",
            "color": "#FFF7F7",
            "position": 17
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/738036747455299764/24454fe5d228acb754eb99223bf7161a.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1089914512787914854",
      "type": "Default",
      "timestamp": "2023-03-27T18:11:09.481+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Am I right in thinking you have two different Smart Contracts deployed to the same address? But presumably they have different Token Ids.",
      "author": {
        "id": "1050490454443032746",
        "name": "ejmina.",
        "discriminator": "0000",
        "nickname": "ejMina",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/1050490454443032746/0a0318733ccbd98b420ba381c738fb44.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1089915867766206533",
      "type": "Default",
      "timestamp": "2023-03-27T18:16:32.533+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "ah sorry maybe I haven't clarified it well. \nI have a V1 contract that has counter and associated action to do with it.\nI want to 'upgrade' the V1 to V2 with the same address but replace logic on how action modify counter. Ideally move state to V2. (which I assumed as the account is the same, just changing verification key)",
      "author": {
        "id": "738036747455299764",
        "name": "zkkirol",
        "discriminator": "0000",
        "nickname": "zkKirol",
        "color": "#E74C3C",
        "isBot": false,
        "roles": [
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "692003893445656606",
            "name": "Genesis Founding Member",
            "color": "#FFD170",
            "position": 114
          },
          {
            "id": "857943736289984583",
            "name": "prism-contributing-member",
            "color": "#FFEABD",
            "position": 112
          },
          {
            "id": "1204059991435251723",
            "name": "Technical Reviewer - Navigators",
            "color": "#E74C3C",
            "position": 105
          },
          {
            "id": "1249795469157335081",
            "name": "NExT",
            "color": "#B47936",
            "position": 103
          },
          {
            "id": "1010215418604040232",
            "name": "zkapp-beta-tester",
            "color": "#E06304",
            "position": 99
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          },
          {
            "id": "1344664872356679743",
            "name": "MWN-tester",
            "color": "#FFA6C9",
            "position": 39
          },
          {
            "id": "1285544625037115557",
            "name": "MinaCon",
            "color": "#FAFFD6",
            "position": 25
          },
          {
            "id": "893400661759246366",
            "name": "Applicant",
            "color": null,
            "position": 24
          },
          {
            "id": "1205541869375979601",
            "name": "UMT",
            "color": "#FFFFFF",
            "position": 22
          },
          {
            "id": "1227899957491535973",
            "name": "Delegation-Program",
            "color": "#FFFFFF",
            "position": 21
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          },
          {
            "id": "1291345674213920768",
            "name": "Rust-Node",
            "color": "#FFF7F7",
            "position": 17
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/738036747455299764/24454fe5d228acb754eb99223bf7161a.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1089917135406497932",
      "type": "Default",
      "timestamp": "2023-03-27T18:21:34.762+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Ah, OK. Thanks for clarifying, Karol. Are you expecting the counter on V1 to be replaced by the counter on V2, when you deploy V2?",
      "author": {
        "id": "1050490454443032746",
        "name": "ejmina.",
        "discriminator": "0000",
        "nickname": "ejMina",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/1050490454443032746/0a0318733ccbd98b420ba381c738fb44.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1089917394715164743",
      "type": "Default",
      "timestamp": "2023-03-27T18:22:36.586+04:00",
      "timestampEdited": "2023-03-27T18:22:44.96+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "no, I expected when I call counter on V2 it will return old state and I can modify it with new logic",
      "author": {
        "id": "738036747455299764",
        "name": "zkkirol",
        "discriminator": "0000",
        "nickname": "zkKirol",
        "color": "#E74C3C",
        "isBot": false,
        "roles": [
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "692003893445656606",
            "name": "Genesis Founding Member",
            "color": "#FFD170",
            "position": 114
          },
          {
            "id": "857943736289984583",
            "name": "prism-contributing-member",
            "color": "#FFEABD",
            "position": 112
          },
          {
            "id": "1204059991435251723",
            "name": "Technical Reviewer - Navigators",
            "color": "#E74C3C",
            "position": 105
          },
          {
            "id": "1249795469157335081",
            "name": "NExT",
            "color": "#B47936",
            "position": 103
          },
          {
            "id": "1010215418604040232",
            "name": "zkapp-beta-tester",
            "color": "#E06304",
            "position": 99
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          },
          {
            "id": "1344664872356679743",
            "name": "MWN-tester",
            "color": "#FFA6C9",
            "position": 39
          },
          {
            "id": "1285544625037115557",
            "name": "MinaCon",
            "color": "#FAFFD6",
            "position": 25
          },
          {
            "id": "893400661759246366",
            "name": "Applicant",
            "color": null,
            "position": 24
          },
          {
            "id": "1205541869375979601",
            "name": "UMT",
            "color": "#FFFFFF",
            "position": 22
          },
          {
            "id": "1227899957491535973",
            "name": "Delegation-Program",
            "color": "#FFFFFF",
            "position": 21
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          },
          {
            "id": "1291345674213920768",
            "name": "Rust-Node",
            "color": "#FFF7F7",
            "position": 17
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/738036747455299764/24454fe5d228acb754eb99223bf7161a.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1089917569051394209",
      "type": "Default",
      "timestamp": "2023-03-27T18:23:18.151+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "That's good. Yes, I was going to say I wouldn't expect that kind of behaviour from V1.",
      "author": {
        "id": "1050490454443032746",
        "name": "ejmina.",
        "discriminator": "0000",
        "nickname": "ejMina",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/1050490454443032746/0a0318733ccbd98b420ba381c738fb44.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1089922959768035348",
      "type": "Default",
      "timestamp": "2023-03-27T18:44:43.398+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "@zkKirol are you sure the second of those jest test cases waits until the first has finished running?",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "738036747455299764",
          "name": "zkkirol",
          "discriminator": "0000",
          "nickname": "zkKirol",
          "color": "#E74C3C",
          "isBot": false,
          "roles": [
            {
              "id": "1075313326499823676",
              "name": "zkApp E2E Tester",
              "color": "#E74C3C",
              "position": 117
            },
            {
              "id": "692003893445656606",
              "name": "Genesis Founding Member",
              "color": "#FFD170",
              "position": 114
            },
            {
              "id": "857943736289984583",
              "name": "prism-contributing-member",
              "color": "#FFEABD",
              "position": 112
            },
            {
              "id": "1204059991435251723",
              "name": "Technical Reviewer - Navigators",
              "color": "#E74C3C",
              "position": 105
            },
            {
              "id": "1249795469157335081",
              "name": "NExT",
              "color": "#B47936",
              "position": 103
            },
            {
              "id": "1010215418604040232",
              "name": "zkapp-beta-tester",
              "color": "#E06304",
              "position": 99
            },
            {
              "id": "916351299988107364",
              "name": "zkApps-bootcamp-2021",
              "color": "#F19924",
              "position": 95
            },
            {
              "id": "1344664872356679743",
              "name": "MWN-tester",
              "color": "#FFA6C9",
              "position": 39
            },
            {
              "id": "1285544625037115557",
              "name": "MinaCon",
              "color": "#FAFFD6",
              "position": 25
            },
            {
              "id": "893400661759246366",
              "name": "Applicant",
              "color": null,
              "position": 24
            },
            {
              "id": "1205541869375979601",
              "name": "UMT",
              "color": "#FFFFFF",
              "position": 22
            },
            {
              "id": "1227899957491535973",
              "name": "Delegation-Program",
              "color": "#FFFFFF",
              "position": 21
            },
            {
              "id": "1220064445863038996",
              "name": "zkApps",
              "color": "#FFFFFF",
              "position": 19
            },
            {
              "id": "1291345674213920768",
              "name": "Rust-Node",
              "color": "#FFF7F7",
              "position": 17
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/738036747455299764/24454fe5d228acb754eb99223bf7161a.png?size=512"
        }
      ]
    },
    {
      "id": "1089923258461208636",
      "type": "Default",
      "timestamp": "2023-03-27T18:45:54.612+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "also, one thing I noticed: just doing\n```ts\nMina.transaction(sender, () => {\n  zkappV2.counter.set(Field(0));\n})\n```\nis probably not enough to update state",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1089923293164863498",
      "type": "Default",
      "timestamp": "2023-03-27T18:46:02.886+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "I think likely there is no account update included in the tx",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1089923610220712056",
      "type": "Default",
      "timestamp": "2023-03-27T18:47:18.478+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "to confirm it's always a good idea to print `tx.toPretty()` if a tx doesn't do what you expect",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1089924184248954981",
      "type": "Default",
      "timestamp": "2023-03-27T18:49:35.337+04:00",
      "timestampEdited": "2023-03-27T18:49:52.946+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "I think this can be an explicit way to add the zkapp account update and change state, if you don't want to do it in a method (i.e. without proof):\n```ts\nMina.transaction(sender, () => {\n  AccountUpdate.attachToTransaction(zkappV2.self);\n  zkappV2.counter.set(Field(0));\n})\n```",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1089924207078551552",
      "type": "Default",
      "timestamp": "2023-03-27T18:49:40.78+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "@zkKirol ^^",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "738036747455299764",
          "name": "zkkirol",
          "discriminator": "0000",
          "nickname": "zkKirol",
          "color": "#E74C3C",
          "isBot": false,
          "roles": [
            {
              "id": "1075313326499823676",
              "name": "zkApp E2E Tester",
              "color": "#E74C3C",
              "position": 117
            },
            {
              "id": "692003893445656606",
              "name": "Genesis Founding Member",
              "color": "#FFD170",
              "position": 114
            },
            {
              "id": "857943736289984583",
              "name": "prism-contributing-member",
              "color": "#FFEABD",
              "position": 112
            },
            {
              "id": "1204059991435251723",
              "name": "Technical Reviewer - Navigators",
              "color": "#E74C3C",
              "position": 105
            },
            {
              "id": "1249795469157335081",
              "name": "NExT",
              "color": "#B47936",
              "position": 103
            },
            {
              "id": "1010215418604040232",
              "name": "zkapp-beta-tester",
              "color": "#E06304",
              "position": 99
            },
            {
              "id": "916351299988107364",
              "name": "zkApps-bootcamp-2021",
              "color": "#F19924",
              "position": 95
            },
            {
              "id": "1344664872356679743",
              "name": "MWN-tester",
              "color": "#FFA6C9",
              "position": 39
            },
            {
              "id": "1285544625037115557",
              "name": "MinaCon",
              "color": "#FAFFD6",
              "position": 25
            },
            {
              "id": "893400661759246366",
              "name": "Applicant",
              "color": null,
              "position": 24
            },
            {
              "id": "1205541869375979601",
              "name": "UMT",
              "color": "#FFFFFF",
              "position": 22
            },
            {
              "id": "1227899957491535973",
              "name": "Delegation-Program",
              "color": "#FFFFFF",
              "position": 21
            },
            {
              "id": "1220064445863038996",
              "name": "zkApps",
              "color": "#FFFFFF",
              "position": 19
            },
            {
              "id": "1291345674213920768",
              "name": "Rust-Node",
              "color": "#FFF7F7",
              "position": 17
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/738036747455299764/24454fe5d228acb754eb99223bf7161a.png?size=512"
        }
      ]
    },
    {
      "id": "1089924324942688328",
      "type": "Default",
      "timestamp": "2023-03-27T18:50:08.881+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "(if you call a `@method` this is done automatically)",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1089929038107254895",
      "type": "Default",
      "timestamp": "2023-03-27T19:08:52.587+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "I've moved it up to same jest test case, and I checked if the verification key was actually updated on the account. it is changed and.... counter is 3 \uD83D\uDE2E \uD83E\uDD2F  ?!",
      "author": {
        "id": "738036747455299764",
        "name": "zkkirol",
        "discriminator": "0000",
        "nickname": "zkKirol",
        "color": "#E74C3C",
        "isBot": false,
        "roles": [
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "692003893445656606",
            "name": "Genesis Founding Member",
            "color": "#FFD170",
            "position": 114
          },
          {
            "id": "857943736289984583",
            "name": "prism-contributing-member",
            "color": "#FFEABD",
            "position": 112
          },
          {
            "id": "1204059991435251723",
            "name": "Technical Reviewer - Navigators",
            "color": "#E74C3C",
            "position": 105
          },
          {
            "id": "1249795469157335081",
            "name": "NExT",
            "color": "#B47936",
            "position": 103
          },
          {
            "id": "1010215418604040232",
            "name": "zkapp-beta-tester",
            "color": "#E06304",
            "position": 99
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          },
          {
            "id": "1344664872356679743",
            "name": "MWN-tester",
            "color": "#FFA6C9",
            "position": 39
          },
          {
            "id": "1285544625037115557",
            "name": "MinaCon",
            "color": "#FAFFD6",
            "position": 25
          },
          {
            "id": "893400661759246366",
            "name": "Applicant",
            "color": null,
            "position": 24
          },
          {
            "id": "1205541869375979601",
            "name": "UMT",
            "color": "#FFFFFF",
            "position": 22
          },
          {
            "id": "1227899957491535973",
            "name": "Delegation-Program",
            "color": "#FFFFFF",
            "position": 21
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          },
          {
            "id": "1291345674213920768",
            "name": "Rust-Node",
            "color": "#FFF7F7",
            "position": 17
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/738036747455299764/24454fe5d228acb754eb99223bf7161a.png?size=512"
      },
      "attachments": [
        {
          "id": "1089929037905920130",
          "url": "https://cdn.discordapp.com/attachments/1089627050358345789/1089929037905920130/image.png?ex=680afcc4&is=6809ab44&hm=6c353cc625387bfd292e17b59929bf0e157b02f58469ff165e42b4ab891d4ac4&",
          "fileName": "image.png",
          "fileSizeBytes": 189845
        }
      ],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1089930040663343265",
      "type": "Default",
      "timestamp": "2023-03-27T19:12:51.615+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "did the state layout change between the two verification keys?",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1089930209123369000",
      "type": "Default",
      "timestamp": "2023-03-27T19:13:31.779+04:00",
      "timestampEdited": "2023-03-27T19:13:41.413+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "might be more reliable to print `Mina.getAccount(...).zkapp.appState` instead of `zkapp.counter.get()`",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1089930574900244500",
      "type": "Default",
      "timestamp": "2023-03-27T19:14:58.987+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "AH obviously !! I've messed up state declaration in my V2",
      "author": {
        "id": "738036747455299764",
        "name": "zkkirol",
        "discriminator": "0000",
        "nickname": "zkKirol",
        "color": "#E74C3C",
        "isBot": false,
        "roles": [
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "692003893445656606",
            "name": "Genesis Founding Member",
            "color": "#FFD170",
            "position": 114
          },
          {
            "id": "857943736289984583",
            "name": "prism-contributing-member",
            "color": "#FFEABD",
            "position": 112
          },
          {
            "id": "1204059991435251723",
            "name": "Technical Reviewer - Navigators",
            "color": "#E74C3C",
            "position": 105
          },
          {
            "id": "1249795469157335081",
            "name": "NExT",
            "color": "#B47936",
            "position": 103
          },
          {
            "id": "1010215418604040232",
            "name": "zkapp-beta-tester",
            "color": "#E06304",
            "position": 99
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          },
          {
            "id": "1344664872356679743",
            "name": "MWN-tester",
            "color": "#FFA6C9",
            "position": 39
          },
          {
            "id": "1285544625037115557",
            "name": "MinaCon",
            "color": "#FAFFD6",
            "position": 25
          },
          {
            "id": "893400661759246366",
            "name": "Applicant",
            "color": null,
            "position": 24
          },
          {
            "id": "1205541869375979601",
            "name": "UMT",
            "color": "#FFFFFF",
            "position": 22
          },
          {
            "id": "1227899957491535973",
            "name": "Delegation-Program",
            "color": "#FFFFFF",
            "position": 21
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          },
          {
            "id": "1291345674213920768",
            "name": "Rust-Node",
            "color": "#FFF7F7",
            "position": 17
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/738036747455299764/24454fe5d228acb754eb99223bf7161a.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1089930662594756738",
      "type": "Default",
      "timestamp": "2023-03-27T19:15:19.895+04:00",
      "timestampEdited": "2023-03-27T19:15:52.09+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "rookie mistake, typical safecheck from upgradebility pattern of eth \uD83E\uDD26‍♂️",
      "author": {
        "id": "738036747455299764",
        "name": "zkkirol",
        "discriminator": "0000",
        "nickname": "zkKirol",
        "color": "#E74C3C",
        "isBot": false,
        "roles": [
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "692003893445656606",
            "name": "Genesis Founding Member",
            "color": "#FFD170",
            "position": 114
          },
          {
            "id": "857943736289984583",
            "name": "prism-contributing-member",
            "color": "#FFEABD",
            "position": 112
          },
          {
            "id": "1204059991435251723",
            "name": "Technical Reviewer - Navigators",
            "color": "#E74C3C",
            "position": 105
          },
          {
            "id": "1249795469157335081",
            "name": "NExT",
            "color": "#B47936",
            "position": 103
          },
          {
            "id": "1010215418604040232",
            "name": "zkapp-beta-tester",
            "color": "#E06304",
            "position": 99
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          },
          {
            "id": "1344664872356679743",
            "name": "MWN-tester",
            "color": "#FFA6C9",
            "position": 39
          },
          {
            "id": "1285544625037115557",
            "name": "MinaCon",
            "color": "#FAFFD6",
            "position": 25
          },
          {
            "id": "893400661759246366",
            "name": "Applicant",
            "color": null,
            "position": 24
          },
          {
            "id": "1205541869375979601",
            "name": "UMT",
            "color": "#FFFFFF",
            "position": 22
          },
          {
            "id": "1227899957491535973",
            "name": "Delegation-Program",
            "color": "#FFFFFF",
            "position": 21
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          },
          {
            "id": "1291345674213920768",
            "name": "Rust-Node",
            "color": "#FFF7F7",
            "position": 17
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/738036747455299764/24454fe5d228acb754eb99223bf7161a.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1089931023451701348",
      "type": "Default",
      "timestamp": "2023-03-27T19:16:45.93+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "massive thanks both ! solved",
      "author": {
        "id": "738036747455299764",
        "name": "zkkirol",
        "discriminator": "0000",
        "nickname": "zkKirol",
        "color": "#E74C3C",
        "isBot": false,
        "roles": [
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "692003893445656606",
            "name": "Genesis Founding Member",
            "color": "#FFD170",
            "position": 114
          },
          {
            "id": "857943736289984583",
            "name": "prism-contributing-member",
            "color": "#FFEABD",
            "position": 112
          },
          {
            "id": "1204059991435251723",
            "name": "Technical Reviewer - Navigators",
            "color": "#E74C3C",
            "position": 105
          },
          {
            "id": "1249795469157335081",
            "name": "NExT",
            "color": "#B47936",
            "position": 103
          },
          {
            "id": "1010215418604040232",
            "name": "zkapp-beta-tester",
            "color": "#E06304",
            "position": 99
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          },
          {
            "id": "1344664872356679743",
            "name": "MWN-tester",
            "color": "#FFA6C9",
            "position": 39
          },
          {
            "id": "1285544625037115557",
            "name": "MinaCon",
            "color": "#FAFFD6",
            "position": 25
          },
          {
            "id": "893400661759246366",
            "name": "Applicant",
            "color": null,
            "position": 24
          },
          {
            "id": "1205541869375979601",
            "name": "UMT",
            "color": "#FFFFFF",
            "position": 22
          },
          {
            "id": "1227899957491535973",
            "name": "Delegation-Program",
            "color": "#FFFFFF",
            "position": 21
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          },
          {
            "id": "1291345674213920768",
            "name": "Rust-Node",
            "color": "#FFF7F7",
            "position": 17
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/738036747455299764/24454fe5d228acb754eb99223bf7161a.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1089931087343538336",
      "type": "Default",
      "timestamp": "2023-03-27T19:17:01.163+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "nice \uD83D\uDE4C",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    }
  ],
  "messageCount": 25
}