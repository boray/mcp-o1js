{
  "guild": {
    "id": "484437221055922177",
    "name": "Mina Protocol",
    "iconUrl": "https://cdn.discordapp.com/icons/484437221055922177/60f5907d2f7e3804b704a7153cae7768.png?size=512"
  },
  "channel": {
    "id": "1250747361534152706",
    "type": "GuildPublicThread",
    "categoryId": "1047214314349658172",
    "category": "zkapps-questions",
    "name": "How to transfer cutsom token from zkApp to an other account without signature ?",
    "topic": null
  },
  "dateRange": {
    "after": null,
    "before": null
  },
  "exportedAt": "2025-04-23T17:55:06.112933+04:00",
  "messages": [
    {
      "id": "1250747361534152706",
      "type": "Default",
      "timestamp": "2024-06-13T13:43:28.752+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Hello,\n\nI tried to transfer a custom token from my zkApp to the sender \n\nI've tried many codes but none of them work : \n```\n  let senderPublicKey = this.sender.getUnconstrained();\n        let simpleTokenIn = new SimpleToken(_tokenIn);\n        let simpleTokenOut = new SimpleToken(_tokenOut);\n        let tranferOut = new SimpleToken(this.address, simpleTokenOut.deriveTokenId());\n\n        // transfer from user to pool\n        await simpleTokenIn.transfer(senderPublicKey, this.address, _amountIn);\n        // transfer from pool to user\n        // await simpleTokenOut.transfer(this.self, senderPublicKey, amountOut);\n        let acc = await AccountUpdate.createSigned(senderPublicKey, simpleTokenOut.deriveTokenId());\n        await tranferOut.approve(acc);\n        await tranferOut.transfer(this.self, senderPublicKey, amountOut);\n```\n\nmy token :\n```\nexport class SimpleToken extends TokenContract {\n  init() {\n    super.init();\n\n    // permission to be sent from zkapp\n    this.account.permissions.set({\n      ...Permissions.default(),\n      access: Permissions.proof(),\n      send: Permissions.proofOrSignature(),\n    });\n  }\n\n  @method async approveBase(forest: AccountUpdateForest) {\n    this.checkZeroBalanceChange(forest);\n  }\n\n  @method async mintTo(to: PublicKey, amount: UInt64) {\n    this.internal.mint({ address: to, amount });\n  }\n}\n```\n\nI don't know if I need to put custom permission on my app or my token.\nIn any case, the aim of this smartcontract is to be compatible with as many tokens as possible.",
      "author": {
        "id": "295757910691151873",
        "name": "youtpout",
        "discriminator": "0000",
        "nickname": "Youtpout",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1251214998752067594",
      "type": "Default",
      "timestamp": "2024-06-14T20:41:42.153+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "When I tried this :\n```\n let senderPublicKey = this.sender.getUnconstrained();\n        let simpleTokenIn = new SimpleToken(_tokenIn);\n        let simpleTokenOut = new SimpleToken(_tokenOut);\n        let tranferOut = new SimpleToken(this.address, simpleTokenOut.deriveTokenId());\n\n        // transfer from user to pool\n        await simpleTokenIn.transfer(senderPublicKey, this.address, _amountIn);\n        // transfer from pool to user\n        await simpleTokenOut.transfer(tranferOut.self, senderPublicKey, amountOut);\n```\n\nI got the error Update_not_permitted_balance",
      "author": {
        "id": "295757910691151873",
        "name": "youtpout",
        "discriminator": "0000",
        "nickname": "Youtpout",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1251868890296750162",
      "type": "Default",
      "timestamp": "2024-06-16T16:00:02.046+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Hi! I see two possible solutions:\n1) Make your zkApp and your SimpleToken the same SmartContract, in this case you can simply mint the tokens\n2) Use example https://github.com/o1-labs/o1js/blob/main/src/examples/zkapps/token-with-proofs.ts where A and B as I understand do very similar things to what you want to achieve",
      "author": {
        "id": "964566918482784306",
        "name": "dfst.io",
        "discriminator": "0000",
        "nickname": "DFST",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1150768164850913322",
            "name": "zkIgnite Cohort 2",
            "color": "#E97404",
            "position": 96
          },
          {
            "id": "1285544625037115557",
            "name": "MinaCon",
            "color": "#FAFFD6",
            "position": 25
          },
          {
            "id": "1205541869375979601",
            "name": "UMT",
            "color": "#FFFFFF",
            "position": 22
          },
          {
            "id": "1220065449098743838",
            "name": "Node-Operations",
            "color": "#FFFFFF",
            "position": 20
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          },
          {
            "id": "1220065628602503188",
            "name": "Testing",
            "color": "#FFFFFF",
            "position": 18
          },
          {
            "id": "1291345674213920768",
            "name": "Rust-Node",
            "color": "#FFF7F7",
            "position": 17
          },
          {
            "id": "1259816280605851648",
            "name": "Links and Images",
            "color": "#FFFFFE",
            "position": 12
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/guilds/484437221055922177/users/964566918482784306/avatars/6d2f9b5ac3d3e9135840e45e13230dd8.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [
        {
          "emoji": {
            "id": "",
            "name": "\uD83D\uDC4D\uD83C\uDFFB",
            "code": "thumbsup_tone1",
            "isAnimated": false,
            "imageUrl": "https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d-1f3fb.svg"
          },
          "count": 1,
          "users": [
            {
              "id": "295757910691151873",
              "name": "youtpout",
              "discriminator": "0000",
              "nickname": "Youtpout",
              "isBot": false,
              "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
            }
          ]
        }
      ],
      "mentions": []
    },
    {
      "id": "1251930008868360272",
      "type": "Reply",
      "timestamp": "2024-06-16T20:02:53.849+04:00",
      "timestampEdited": "2024-06-16T21:00:08.213+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "I'm building a dex, unfortunately I don't know which token will be added in advance, so using the mint/burn function is not viable.\n\nThe only problem is that I have to sign the account creation with the dex private key every time a new token is added to the dex... for the moment I'm using method 2, hoping for a better solution",
      "author": {
        "id": "295757910691151873",
        "name": "youtpout",
        "discriminator": "0000",
        "nickname": "Youtpout",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "964566918482784306",
          "name": "dfst.io",
          "discriminator": "0000",
          "nickname": "DFST",
          "color": "#FA7504",
          "isBot": false,
          "roles": [
            {
              "id": "1182371055923376168",
              "name": "Mina Navigator",
              "color": "#FA7504",
              "position": 100
            },
            {
              "id": "1150768164850913322",
              "name": "zkIgnite Cohort 2",
              "color": "#E97404",
              "position": 96
            },
            {
              "id": "1285544625037115557",
              "name": "MinaCon",
              "color": "#FAFFD6",
              "position": 25
            },
            {
              "id": "1205541869375979601",
              "name": "UMT",
              "color": "#FFFFFF",
              "position": 22
            },
            {
              "id": "1220065449098743838",
              "name": "Node-Operations",
              "color": "#FFFFFF",
              "position": 20
            },
            {
              "id": "1220064445863038996",
              "name": "zkApps",
              "color": "#FFFFFF",
              "position": 19
            },
            {
              "id": "1220065628602503188",
              "name": "Testing",
              "color": "#FFFFFF",
              "position": 18
            },
            {
              "id": "1291345674213920768",
              "name": "Rust-Node",
              "color": "#FFF7F7",
              "position": 17
            },
            {
              "id": "1259816280605851648",
              "name": "Links and Images",
              "color": "#FFFFFE",
              "position": 12
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/guilds/484437221055922177/users/964566918482784306/avatars/6d2f9b5ac3d3e9135840e45e13230dd8.png?size=512"
        }
      ],
      "reference": {
        "messageId": "1251868890296750162",
        "channelId": "1250747361534152706",
        "guildId": "484437221055922177"
      }
    },
    {
      "id": "1251932905417216100",
      "type": "Default",
      "timestamp": "2024-06-16T20:14:24.44+04:00",
      "timestampEdited": "2024-06-16T21:01:30.278+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "The account update limit is really problematic, I have to keep looking for solutions because a simple cash deposit or exchange involving 2 transfers reaches the limits, so I don't have much margin left.",
      "author": {
        "id": "295757910691151873",
        "name": "youtpout",
        "discriminator": "0000",
        "nickname": "Youtpout",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1252210507319083048",
      "type": "Default",
      "timestamp": "2024-06-17T14:37:29.891+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "There are ways of working around this",
      "author": {
        "id": "140202196758167552",
        "name": "las0",
        "discriminator": "0000",
        "nickname": "Las",
        "color": "#E5DFBB",
        "isBot": false,
        "roles": [
          {
            "id": "1280898028529778789",
            "name": "Community Builder",
            "color": "#E5DFBB",
            "position": 26
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/140202196758167552/09906db085c1359960d2883ed15e8108.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1252210516647215105",
      "type": "Default",
      "timestamp": "2024-06-17T14:37:32.115+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Dark arts",
      "author": {
        "id": "140202196758167552",
        "name": "las0",
        "discriminator": "0000",
        "nickname": "Las",
        "color": "#E5DFBB",
        "isBot": false,
        "roles": [
          {
            "id": "1280898028529778789",
            "name": "Community Builder",
            "color": "#E5DFBB",
            "position": 26
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/140202196758167552/09906db085c1359960d2883ed15e8108.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1252210612080214077",
      "type": "Default",
      "timestamp": "2024-06-17T14:37:54.868+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Anyway, I propose thinking in terms of what account updates you’re making, not O1JS",
      "author": {
        "id": "140202196758167552",
        "name": "las0",
        "discriminator": "0000",
        "nickname": "Las",
        "color": "#E5DFBB",
        "isBot": false,
        "roles": [
          {
            "id": "1280898028529778789",
            "name": "Community Builder",
            "color": "#E5DFBB",
            "position": 26
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/140202196758167552/09906db085c1359960d2883ed15e8108.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1252210728513962056",
      "type": "Default",
      "timestamp": "2024-06-17T14:38:22.628+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Wrt account update limit, you can do everything mostly in a single account and do deposits and withdrawals separately",
      "author": {
        "id": "140202196758167552",
        "name": "las0",
        "discriminator": "0000",
        "nickname": "Las",
        "color": "#E5DFBB",
        "isBot": false,
        "roles": [
          {
            "id": "1280898028529778789",
            "name": "Community Builder",
            "color": "#E5DFBB",
            "position": 26
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/140202196758167552/09906db085c1359960d2883ed15e8108.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1252210796679663637",
      "type": "Default",
      "timestamp": "2024-06-17T14:38:38.88+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "In some sense everything turns into a rollup",
      "author": {
        "id": "140202196758167552",
        "name": "las0",
        "discriminator": "0000",
        "nickname": "Las",
        "color": "#E5DFBB",
        "isBot": false,
        "roles": [
          {
            "id": "1280898028529778789",
            "name": "Community Builder",
            "color": "#E5DFBB",
            "position": 26
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/140202196758167552/09906db085c1359960d2883ed15e8108.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1252211162230034454",
      "type": "Reply",
      "timestamp": "2024-06-17T14:40:06.034+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "This means you don’t have send or receive permission",
      "author": {
        "id": "140202196758167552",
        "name": "las0",
        "discriminator": "0000",
        "nickname": "Las",
        "color": "#E5DFBB",
        "isBot": false,
        "roles": [
          {
            "id": "1280898028529778789",
            "name": "Community Builder",
            "color": "#E5DFBB",
            "position": 26
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/140202196758167552/09906db085c1359960d2883ed15e8108.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "295757910691151873",
          "name": "youtpout",
          "discriminator": "0000",
          "nickname": "Youtpout",
          "color": "#FA7504",
          "isBot": false,
          "roles": [
            {
              "id": "1182371055923376168",
              "name": "Mina Navigator",
              "color": "#FA7504",
              "position": 100
            },
            {
              "id": "1220064445863038996",
              "name": "zkApps",
              "color": "#FFFFFF",
              "position": 19
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
        }
      ],
      "reference": {
        "messageId": "1251214998752067594",
        "channelId": "1250747361534152706",
        "guildId": "484437221055922177"
      }
    },
    {
      "id": "1252211354622754826",
      "type": "Default",
      "timestamp": "2024-06-17T14:40:51.904+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "You probably want to use the new token standard BTW",
      "author": {
        "id": "140202196758167552",
        "name": "las0",
        "discriminator": "0000",
        "nickname": "Las",
        "color": "#E5DFBB",
        "isBot": false,
        "roles": [
          {
            "id": "1280898028529778789",
            "name": "Community Builder",
            "color": "#E5DFBB",
            "position": 26
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/140202196758167552/09906db085c1359960d2883ed15e8108.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1252211412764463104",
      "type": "Default",
      "timestamp": "2024-06-17T14:41:05.766+04:00",
      "timestampEdited": "2024-06-17T14:41:14.409+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Idea is every token would have same vk",
      "author": {
        "id": "140202196758167552",
        "name": "las0",
        "discriminator": "0000",
        "nickname": "Las",
        "color": "#E5DFBB",
        "isBot": false,
        "roles": [
          {
            "id": "1280898028529778789",
            "name": "Community Builder",
            "color": "#E5DFBB",
            "position": 26
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/140202196758167552/09906db085c1359960d2883ed15e8108.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1252224027687391364",
      "type": "Reply",
      "timestamp": "2024-06-17T15:31:13.398+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "I use the new token standard, one transfer generate 3 accounts update, I created a new topic for this",
      "author": {
        "id": "295757910691151873",
        "name": "youtpout",
        "discriminator": "0000",
        "nickname": "Youtpout",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "140202196758167552",
          "name": "las0",
          "discriminator": "0000",
          "nickname": "Las",
          "color": "#E5DFBB",
          "isBot": false,
          "roles": [
            {
              "id": "1280898028529778789",
              "name": "Community Builder",
              "color": "#E5DFBB",
              "position": 26
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/140202196758167552/09906db085c1359960d2883ed15e8108.png?size=512"
        }
      ],
      "reference": {
        "messageId": "1252211412764463104",
        "channelId": "1250747361534152706",
        "guildId": "484437221055922177"
      }
    },
    {
      "id": "1252224590764310589",
      "type": "Default",
      "timestamp": "2024-06-17T15:33:27.646+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "https://discord.com/channels/484437221055922177/1251951563174580315",
      "author": {
        "id": "295757910691151873",
        "name": "youtpout",
        "discriminator": "0000",
        "nickname": "Youtpout",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1252501564522889247",
      "type": "Default",
      "timestamp": "2024-06-18T09:54:03.336+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Looking at your other questions, @Youtpout it seems like you figured it out with `transferAway()`?\n\nFor anyone reading this, you transfer tokens from a zkApp by creating a method which transfers those tokens away. Calling this method, and after that accessing `zkapp.self`, gives you an account update with \"proof\" authorization for that method call. you can pass this account update to `token.transfer()`, instead of the from address",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "295757910691151873",
          "name": "youtpout",
          "discriminator": "0000",
          "nickname": "Youtpout",
          "color": "#FA7504",
          "isBot": false,
          "roles": [
            {
              "id": "1182371055923376168",
              "name": "Mina Navigator",
              "color": "#FA7504",
              "position": 100
            },
            {
              "id": "1220064445863038996",
              "name": "zkApps",
              "color": "#FFFFFF",
              "position": 19
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
        }
      ]
    },
    {
      "id": "1252518650837991494",
      "type": "Reply",
      "timestamp": "2024-06-18T11:01:57.031+04:00",
      "timestampEdited": "2024-06-18T11:03:17.844+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "inspired from example projects\n\n```\n  @method async transferAway(amount: UInt64) {\n    // TODO: in a real zkApp, here would be application-specific checks for whether we want to allow sending tokens\n\n    this.balance.subInPlace(amount);\n    this.self.body.mayUseToken = AccountUpdate.MayUseToken.ParentsOwnToken;\n\n  }\n```",
      "author": {
        "id": "295757910691151873",
        "name": "youtpout",
        "discriminator": "0000",
        "nickname": "Youtpout",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "568421780331692042",
          "name": "mitschabaude",
          "discriminator": "0000",
          "nickname": "gregor",
          "color": "#6991D8",
          "isBot": false,
          "roles": [
            {
              "id": "751144417951219713",
              "name": "Core Engineers",
              "color": "#6991D8",
              "position": 122
            },
            {
              "id": "1075313326499823676",
              "name": "zkApp E2E Tester",
              "color": "#E74C3C",
              "position": 117
            },
            {
              "id": "916351299988107364",
              "name": "zkApps-bootcamp-2021",
              "color": "#F19924",
              "position": 95
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
        }
      ],
      "reference": {
        "messageId": "1252501564522889247",
        "channelId": "1250747361534152706",
        "guildId": "484437221055922177"
      }
    },
    {
      "id": "1252518924508069908",
      "type": "Default",
      "timestamp": "2024-06-18T11:03:02.279+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "https://github.com/o1-labs/o1js/blob/2b187fbe9c8d727b71e987b0477e98a2082fa54f/src/examples/zkapps/dex/dex.ts#L314",
      "author": {
        "id": "295757910691151873",
        "name": "youtpout",
        "discriminator": "0000",
        "nickname": "Youtpout",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
      },
      "attachments": [],
      "embeds": [
        {
          "title": "o1js/src/examples/zkapps/dex/dex.ts at 2b187fbe9c8d727b71e987b0477e...",
          "url": "https://github.com/o1-labs/o1js/blob/2b187fbe9c8d727b71e987b0477e98a2082fa54f/src/examples/zkapps/dex/dex.ts",
          "timestamp": null,
          "description": "TypeScript framework for zk-SNARKs and zkApps. Contribute to o1-labs/o1js development by creating an account on GitHub.",
          "color": "#1E2327",
          "thumbnail": {
            "url": "https://images-ext-1.discordapp.net/external/jfzsLzHvG_9YQ_9zDg0BaLmkssSpDgo9-9_HcQEw_d0/https/opengraph.githubassets.com/1d7a20df338faf263fee73ccacd98d79d435b40764187e4adfa58fb9769e58d0/o1-labs/o1js",
            "width": 1200,
            "height": 600
          },
          "images": [],
          "fields": []
        }
      ],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1252530764428345424",
      "type": "Default",
      "timestamp": "2024-06-18T11:50:05.136+04:00",
      "timestampEdited": "2024-06-18T11:50:22.066+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Just for the sake of completeness (you probably know that already):\nThe `transferAway()` method shown above is obviously insecure (it allows anyone to withdraw from the zkapp, without any condition)\n\nThe current versions of the DEX example don't have that method anymore, but show how to do a swap securely, using the same pattern of accessing `.self` after calling a zkapp method that authorizes a spend.",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1252531775842811934",
      "type": "Reply",
      "timestamp": "2024-06-18T11:54:06.276+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "my solution isn't really secure at the moment, my goal is just to have a working poc, and that's no easy feat, anyway I'll need several months to have a 100% operational dex, and with the evolution of o1js it'll probably be easier in the future.",
      "author": {
        "id": "295757910691151873",
        "name": "youtpout",
        "discriminator": "0000",
        "nickname": "Youtpout",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [
        {
          "emoji": {
            "id": "",
            "name": "\uD83D\uDC4D",
            "code": "thumbsup",
            "isAnimated": false,
            "imageUrl": "https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d.svg"
          },
          "count": 1,
          "users": [
            {
              "id": "568421780331692042",
              "name": "mitschabaude",
              "discriminator": "0000",
              "nickname": "gregor",
              "isBot": false,
              "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
            }
          ]
        }
      ],
      "mentions": [
        {
          "id": "568421780331692042",
          "name": "mitschabaude",
          "discriminator": "0000",
          "nickname": "gregor",
          "color": "#6991D8",
          "isBot": false,
          "roles": [
            {
              "id": "751144417951219713",
              "name": "Core Engineers",
              "color": "#6991D8",
              "position": 122
            },
            {
              "id": "1075313326499823676",
              "name": "zkApp E2E Tester",
              "color": "#E74C3C",
              "position": 117
            },
            {
              "id": "916351299988107364",
              "name": "zkApps-bootcamp-2021",
              "color": "#F19924",
              "position": 95
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
        }
      ],
      "reference": {
        "messageId": "1252530764428345424",
        "channelId": "1250747361534152706",
        "guildId": "484437221055922177"
      }
    },
    {
      "id": "1252531958433447946",
      "type": "Reply",
      "timestamp": "2024-06-18T11:54:49.809+04:00",
      "timestampEdited": "2024-06-18T11:55:10.352+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "in the dex the method who update the balance handle the swap too",
      "author": {
        "id": "295757910691151873",
        "name": "youtpout",
        "discriminator": "0000",
        "nickname": "Youtpout",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "568421780331692042",
          "name": "mitschabaude",
          "discriminator": "0000",
          "nickname": "gregor",
          "color": "#6991D8",
          "isBot": false,
          "roles": [
            {
              "id": "751144417951219713",
              "name": "Core Engineers",
              "color": "#6991D8",
              "position": 122
            },
            {
              "id": "1075313326499823676",
              "name": "zkApp E2E Tester",
              "color": "#E74C3C",
              "position": 117
            },
            {
              "id": "916351299988107364",
              "name": "zkApps-bootcamp-2021",
              "color": "#F19924",
              "position": 95
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
        }
      ],
      "reference": {
        "messageId": "1252530764428345424",
        "channelId": "1250747361534152706",
        "guildId": "484437221055922177"
      }
    },
    {
      "id": "1252532066097303612",
      "type": "Reply",
      "timestamp": "2024-06-18T11:55:15.478+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "say it again? \uD83D\uDE04",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "295757910691151873",
          "name": "youtpout",
          "discriminator": "0000",
          "nickname": "Youtpout",
          "color": "#FA7504",
          "isBot": false,
          "roles": [
            {
              "id": "1182371055923376168",
              "name": "Mina Navigator",
              "color": "#FA7504",
              "position": 100
            },
            {
              "id": "1220064445863038996",
              "name": "zkApps",
              "color": "#FFFFFF",
              "position": 19
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
        }
      ],
      "reference": {
        "messageId": "1252531958433447946",
        "channelId": "1250747361534152706",
        "guildId": "484437221055922177"
      }
    },
    {
      "id": "1252532183378165771",
      "type": "Reply",
      "timestamp": "2024-06-18T11:55:43.44+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "completely understandable.\nand good luck with the DEX! it's definitely a complex project",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "295757910691151873",
          "name": "youtpout",
          "discriminator": "0000",
          "nickname": "Youtpout",
          "color": "#FA7504",
          "isBot": false,
          "roles": [
            {
              "id": "1182371055923376168",
              "name": "Mina Navigator",
              "color": "#FA7504",
              "position": 100
            },
            {
              "id": "1220064445863038996",
              "name": "zkApps",
              "color": "#FFFFFF",
              "position": 19
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
        }
      ],
      "reference": {
        "messageId": "1252531775842811934",
        "channelId": "1250747361534152706",
        "guildId": "484437221055922177"
      }
    },
    {
      "id": "1252532421337940018",
      "type": "Reply",
      "timestamp": "2024-06-18T11:56:40.174+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "exactly, because that way it can ensure that the DEX \"gets something in return\" for giving away tokens. that's why it's not insecure",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "295757910691151873",
          "name": "youtpout",
          "discriminator": "0000",
          "nickname": "Youtpout",
          "color": "#FA7504",
          "isBot": false,
          "roles": [
            {
              "id": "1182371055923376168",
              "name": "Mina Navigator",
              "color": "#FA7504",
              "position": 100
            },
            {
              "id": "1220064445863038996",
              "name": "zkApps",
              "color": "#FFFFFF",
              "position": 19
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
        }
      ],
      "reference": {
        "messageId": "1252531958433447946",
        "channelId": "1250747361534152706",
        "guildId": "484437221055922177"
      }
    },
    {
      "id": "1252532537822023701",
      "type": "Reply",
      "timestamp": "2024-06-18T11:57:07.946+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "It's the same method that handles the swap and the balance update, but I don't know if I can do that in my case the reserves are stored in the offchain state.",
      "author": {
        "id": "295757910691151873",
        "name": "youtpout",
        "discriminator": "0000",
        "nickname": "Youtpout",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "568421780331692042",
          "name": "mitschabaude",
          "discriminator": "0000",
          "nickname": "gregor",
          "color": "#6991D8",
          "isBot": false,
          "roles": [
            {
              "id": "751144417951219713",
              "name": "Core Engineers",
              "color": "#6991D8",
              "position": 122
            },
            {
              "id": "1075313326499823676",
              "name": "zkApp E2E Tester",
              "color": "#E74C3C",
              "position": 117
            },
            {
              "id": "916351299988107364",
              "name": "zkApps-bootcamp-2021",
              "color": "#F19924",
              "position": 95
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
        }
      ],
      "reference": {
        "messageId": "1252532066097303612",
        "channelId": "1250747361534152706",
        "guildId": "484437221055922177"
      }
    },
    {
      "id": "1252532813010305035",
      "type": "Default",
      "timestamp": "2024-06-18T11:58:13.556+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "My goal is to be able to swap between several pools, so I can't store tokens on different contracts, which would involve too many account updates.",
      "author": {
        "id": "295757910691151873",
        "name": "youtpout",
        "discriminator": "0000",
        "nickname": "Youtpout",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1252561516411097128",
      "type": "Reply",
      "timestamp": "2024-06-18T13:52:16.98+04:00",
      "timestampEdited": "2024-06-18T13:52:43.475+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Not sure I follow - how else do you want to manage multiple tokens? There needs to be a different account for holding each different token, because every account on Mina has just one kind of token.",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "295757910691151873",
          "name": "youtpout",
          "discriminator": "0000",
          "nickname": "Youtpout",
          "color": "#FA7504",
          "isBot": false,
          "roles": [
            {
              "id": "1182371055923376168",
              "name": "Mina Navigator",
              "color": "#FA7504",
              "position": 100
            },
            {
              "id": "1220064445863038996",
              "name": "zkApps",
              "color": "#FFFFFF",
              "position": 19
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
        }
      ],
      "reference": {
        "messageId": "1252532813010305035",
        "channelId": "1250747361534152706",
        "guildId": "484437221055922177"
      }
    },
    {
      "id": "1252562070793355316",
      "type": "Default",
      "timestamp": "2024-06-18T13:54:29.155+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "I would try to work around the \"too many account updates\" problem by rolling out your interactions into multiple transactions.\n\nfor inspiration, the `dex-with-actions.ts`  example in o1js does (a bit of) that",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1252566433368375387",
      "type": "Reply",
      "timestamp": "2024-06-18T14:11:49.274+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "I store all tokens in the same contract, so if you have a mina/usdt mina/shiba pair, the mina will be stored in the same contract, so if you try to get the mina balance of the contract, you'll get the balance of all pairs.",
      "author": {
        "id": "295757910691151873",
        "name": "youtpout",
        "discriminator": "0000",
        "nickname": "Youtpout",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "568421780331692042",
          "name": "mitschabaude",
          "discriminator": "0000",
          "nickname": "gregor",
          "color": "#6991D8",
          "isBot": false,
          "roles": [
            {
              "id": "751144417951219713",
              "name": "Core Engineers",
              "color": "#6991D8",
              "position": 122
            },
            {
              "id": "1075313326499823676",
              "name": "zkApp E2E Tester",
              "color": "#E74C3C",
              "position": 117
            },
            {
              "id": "916351299988107364",
              "name": "zkApps-bootcamp-2021",
              "color": "#F19924",
              "position": 95
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
        }
      ],
      "reference": {
        "messageId": "1252561516411097128",
        "channelId": "1250747361534152706",
        "guildId": "484437221055922177"
      }
    },
    {
      "id": "1252566532832366643",
      "type": "Default",
      "timestamp": "2024-06-18T14:12:12.988+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "it's similar to what's done on uniswap v4",
      "author": {
        "id": "295757910691151873",
        "name": "youtpout",
        "discriminator": "0000",
        "nickname": "Youtpout",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1252566769957339219",
      "type": "Default",
      "timestamp": "2024-06-18T14:13:09.523+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "interesting \uD83D\uDE2E",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1252566883052552233",
      "type": "Default",
      "timestamp": "2024-06-18T14:13:36.487+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "but then you probably do have actual token balances somewhere?",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1252567378458312714",
      "type": "Default",
      "timestamp": "2024-06-18T14:15:34.601+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "so if you want to do a usdt sheebu swap, you can do it easily, the mina will not move from the contract, it will only be the balances in the offchainstate that will move.",
      "author": {
        "id": "295757910691151873",
        "name": "youtpout",
        "discriminator": "0000",
        "nickname": "Youtpout",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1252567558775767161",
      "type": "Default",
      "timestamp": "2024-06-18T14:16:17.592+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "the offchainstate:\n\n```\nexport const offchainState = OffchainState(\n    {\n        numberPool: OffchainState.Field(UInt64),\n        poolsState: OffchainState.Map(Field, PoolState),\n        liquidities: OffchainState.Map(Field, UInt64),\n        deposits: OffchainState.Map(Field, UInt64)\n    }\n);\n\nexport class PoolState extends Struct({\n    token0: PublicKey,\n    token1: PublicKey,\n    reserve0: UInt64,\n    reserve1: UInt64,\n    totalSupply: UInt64,\n    init: Bool,\n    kLast: Field,\n    liquidityManager: PublicKey\n})\n\n```",
      "author": {
        "id": "295757910691151873",
        "name": "youtpout",
        "discriminator": "0000",
        "nickname": "Youtpout",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1252568267713937458",
      "type": "Default",
      "timestamp": "2024-06-18T14:19:06.616+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "ah so the DEX is not using custom tokens for sh1ba / usdt etc?",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1252568307165298739",
      "type": "Default",
      "timestamp": "2024-06-18T14:19:16.022+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "but just represent them in offchain state",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1252568413688168448",
      "type": "Default",
      "timestamp": "2024-06-18T14:19:41.419+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "but then, is there some bridge between those balances in offchain state and actual custom tokens?",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1252569000324501526",
      "type": "Reply",
      "timestamp": "2024-06-18T14:22:01.284+04:00",
      "timestampEdited": "2024-06-18T14:22:17.567+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "the token is sent to the dex, it's just that in the case of a multiple swap you'll only have 2 transfers maximum, the token that goes in and the one that goes out\n\nif different contracts managed pairs, I wouldn't be able to make multiple swaps because of the account update limit",
      "author": {
        "id": "295757910691151873",
        "name": "youtpout",
        "discriminator": "0000",
        "nickname": "Youtpout",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "568421780331692042",
          "name": "mitschabaude",
          "discriminator": "0000",
          "nickname": "gregor",
          "color": "#6991D8",
          "isBot": false,
          "roles": [
            {
              "id": "751144417951219713",
              "name": "Core Engineers",
              "color": "#6991D8",
              "position": 122
            },
            {
              "id": "1075313326499823676",
              "name": "zkApp E2E Tester",
              "color": "#E74C3C",
              "position": 117
            },
            {
              "id": "916351299988107364",
              "name": "zkApps-bootcamp-2021",
              "color": "#F19924",
              "position": 95
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
        }
      ],
      "reference": {
        "messageId": "1252568413688168448",
        "channelId": "1250747361534152706",
        "guildId": "484437221055922177"
      }
    },
    {
      "id": "1252569327476150355",
      "type": "Default",
      "timestamp": "2024-06-18T14:23:19.283+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "https://docs.uniswap.org/contracts/v4/concepts/v4-architecture-overview",
      "author": {
        "id": "295757910691151873",
        "name": "youtpout",
        "discriminator": "0000",
        "nickname": "Youtpout",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
      },
      "attachments": [],
      "embeds": [
        {
          "title": "V4 Architecture Overview | Uniswap",
          "url": "https://docs.uniswap.org/contracts/v4/concepts/v4-architecture-overview",
          "timestamp": null,
          "description": "In Uniswap V3, each pool has its own contract instance, which makes initializing pools and performing swaps in multiple pools costly.",
          "thumbnail": {
            "url": "https://images-ext-1.discordapp.net/external/E0TD-obMluiqfXtvWlq9VxRkyiIAbgmj8b0HXMO8bbw/https/docs.uniswap.org/img/twitter_card_bg.jpg",
            "width": 1200,
            "height": 631
          },
          "images": [],
          "fields": []
        }
      ],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1252569525820330034",
      "type": "Default",
      "timestamp": "2024-06-18T14:24:06.572+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "> if different contracts managed pairs, I wouldn't be able to make multiple swaps because of the account update limit \nI think you would be able to do so with different workarounds. but your design seems clever!",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [
        {
          "emoji": {
            "id": "",
            "name": "❤️",
            "code": "heart",
            "isAnimated": false,
            "imageUrl": "https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/2764.svg"
          },
          "count": 1,
          "users": [
            {
              "id": "295757910691151873",
              "name": "youtpout",
              "discriminator": "0000",
              "nickname": "Youtpout",
              "isBot": false,
              "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
            }
          ]
        }
      ],
      "mentions": []
    },
    {
      "id": "1252570348482859061",
      "type": "Default",
      "timestamp": "2024-06-18T14:27:22.71+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "my goal is to have a stand-alone project that doesn't require additional layers to function, so if tomorrow my site is down anyone else can recreate a site that will use my contract without needing data held only by me",
      "author": {
        "id": "295757910691151873",
        "name": "youtpout",
        "discriminator": "0000",
        "nickname": "Youtpout",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [
        {
          "emoji": {
            "id": "",
            "name": "❤️",
            "code": "heart",
            "isAnimated": false,
            "imageUrl": "https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/2764.svg"
          },
          "count": 1,
          "users": [
            {
              "id": "875836314950451270",
              "name": "firat8805",
              "discriminator": "0000",
              "nickname": "firat_llc",
              "isBot": false,
              "avatarUrl": "https://cdn.discordapp.com/avatars/875836314950451270/f63753bc9f64efd757435ca1110b8289.png?size=512"
            }
          ]
        }
      ],
      "mentions": []
    },
    {
      "id": "1252570417747722323",
      "type": "Default",
      "timestamp": "2024-06-18T14:27:39.224+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "nice",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1255103473544855626",
      "type": "Default",
      "timestamp": "2024-06-25T14:13:06.788+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "@gregor \n```sounds like a nice solution!\non the other hand, if the signature key is public, you can't prevent anyone from creating those token accounts by themselves, and setting permissions however they like, and then locking down permissions\nso maybe there shouldn't be a single hard-coded signature key, but rather people should be able to register pool contracts created with any key, and the deployment of those contracts makes sure that the creators can't manipulate them later on \nYoutpout — Aujourd’hui à 11:47\nso it would be up to the backend to manage this when a new pool is created, for example, but the platform would have to be at least centralized.\ngregor — Aujourd’hui à 11:56\nwhy?\nyou could use offchain state to store it, which is decentralized```\n\n\n\nI don't have several pools but only one pool, I could make a system with several pools to see if it doesn't cause problems with the account update limit if I make multipool swaps that would involve several transfers.",
      "author": {
        "id": "295757910691151873",
        "name": "youtpout",
        "discriminator": "0000",
        "nickname": "Youtpout",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "568421780331692042",
          "name": "mitschabaude",
          "discriminator": "0000",
          "nickname": "gregor",
          "color": "#6991D8",
          "isBot": false,
          "roles": [
            {
              "id": "751144417951219713",
              "name": "Core Engineers",
              "color": "#6991D8",
              "position": 122
            },
            {
              "id": "1075313326499823676",
              "name": "zkApp E2E Tester",
              "color": "#E74C3C",
              "position": 117
            },
            {
              "id": "916351299988107364",
              "name": "zkApps-bootcamp-2021",
              "color": "#F19924",
              "position": 95
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
        }
      ]
    },
    {
      "id": "1255104828112244736",
      "type": "Default",
      "timestamp": "2024-06-25T14:18:29.742+04:00",
      "timestampEdited": "2024-06-25T19:17:13.5+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Now I'm confused because I thought your motivation is that \"people can create their own pools\". But now you say you have only one pool?",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1255115891079778304",
      "type": "Reply",
      "timestamp": "2024-06-25T15:02:27.359+04:00",
      "timestampEdited": "2024-06-25T15:04:50.842+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "when you create a pool it just adds it to the offchainstate, I am not deploying a new contract for",
      "author": {
        "id": "295757910691151873",
        "name": "youtpout",
        "discriminator": "0000",
        "nickname": "Youtpout",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "568421780331692042",
          "name": "mitschabaude",
          "discriminator": "0000",
          "nickname": "gregor",
          "color": "#6991D8",
          "isBot": false,
          "roles": [
            {
              "id": "751144417951219713",
              "name": "Core Engineers",
              "color": "#6991D8",
              "position": 122
            },
            {
              "id": "1075313326499823676",
              "name": "zkApp E2E Tester",
              "color": "#E74C3C",
              "position": 117
            },
            {
              "id": "916351299988107364",
              "name": "zkApps-bootcamp-2021",
              "color": "#F19924",
              "position": 95
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
        }
      ],
      "reference": {
        "messageId": "1255104828112244736",
        "channelId": "1250747361534152706",
        "guildId": "484437221055922177"
      }
    },
    {
      "id": "1255116352834764863",
      "type": "Default",
      "timestamp": "2024-06-25T15:04:17.45+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "```\n       @method.returns(Field)\n    async createPool(_token0: PublicKey, _token1: PublicKey) {\n        _token0.x.assertLessThan(_token1.x, \"token 0 need to be lower than token1\");\n\n        const hashPair = await hashPairFunction(_token0, _token1);\n\n        let poolState = await offchainState.fields.poolsState.get(hashPair);\n        let poolStateValue = poolState.orElse(PoolState.empty());\n        poolStateValue.hashPair().assertNotEquals(hashPair, \"This pair already exist\");\n\n        poolStateValue.token0 = _token0;\n        poolStateValue.token1 = _token1;\n\n        let token1 = new SimpleToken(_token1);       \n\n        offchainState.fields.poolsState.update(hashPair, {\n            from: undefined,\n            to: poolStateValue\n        });\n\n        let numberPool = await offchainState.fields.numberPool.get();\n        let numberPoolValue = numberPool.orElse(0n);\n        offchainState.fields.numberPool.update({\n            from: numberPool,\n            to: numberPoolValue.add(1)\n        });\n\n        return hashPair;\n    }\n```",
      "author": {
        "id": "295757910691151873",
        "name": "youtpout",
        "discriminator": "0000",
        "nickname": "Youtpout",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1255180861595451454",
      "type": "Default",
      "timestamp": "2024-06-25T19:20:37.537+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "ok. but then I still don't get the problem you described earlier: that you have to hard-code a zkapp key. in the code you show, creating a pool doesn't even correspond to deploying a zkapp",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1255776802962407455",
      "type": "Default",
      "timestamp": "2024-06-27T10:48:41.031+04:00",
      "timestampEdited": "2024-06-27T10:49:11.23+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "This is the poolmanager contract where all the tokens are transferred.\nIf I ever make the key public, a malicious user might deploy a malicious smartcontract with the key at the address of a token not yet referenced by the platform.",
      "author": {
        "id": "295757910691151873",
        "name": "youtpout",
        "discriminator": "0000",
        "nickname": "Youtpout",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/295757910691151873/3c7813b443eec196ba05378b57e0e0ff.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    }
  ],
  "messageCount": 48
}