{
  "guild": {
    "id": "484437221055922177",
    "name": "Mina Protocol",
    "iconUrl": "https://cdn.discordapp.com/icons/484437221055922177/60f5907d2f7e3804b704a7153cae7768.png?size=512"
  },
  "channel": {
    "id": "1209576381206237284",
    "type": "GuildPublicThread",
    "categoryId": "1047214314349658172",
    "category": "zkapps-questions",
    "name": "ERROR: ... outside checked computation",
    "topic": null
  },
  "dateRange": {
    "after": null,
    "before": null
  },
  "exportedAt": "2025-04-24T11:39:54.9235927+04:00",
  "messages": [
    {
      "id": "1209576381206237284",
      "type": "Default",
      "timestamp": "2024-02-20T23:04:42.122+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "hey i just uploaded my challenge1 repo to github, and after trying a fresh install i get the following:\n```\nCompiling smart contract...\n/Users/work/Documents/mina/mina-protocol-challenge1/node_modules/o1js/dist/node/bindings/compiled/_node_bindings/o1js_node.bc.cjs:6799\n         throw err;\n         ^\n\nError: This function can't be run outside of a checked computation.\n    at Function.check (o1js/dist/node/lib/bool.js:275:22)\n    at Object.check (o1js/dist/node/lib/provable.js:453:22)\n    at MerkleWitness8.check (o1js/dist/node/lib/circuit_value.js:118:22)\n    at Object.witness (o1js/dist/node/lib/provable.js:204:10)\n    at emptyWitness (o1js/dist/node/lib/proof_system.js:540:21)\n    at synthesizeMethodArguments (o1js/dist/node/lib/proof_system.js:476:23)\n    at file:///Users/work/Documents/mina/mina-protocol-challenge1/node_modules/o1js/dist/node/lib/proof_system.js:385:20\n    at file:///Users/work/Documents/mina/mina-protocol-challenge1/node_modules/o1js/dist/node/lib/provable-context.js:65:22\n    at Object.constraintSystem (o1js/dist/node/lib/provable-context.js:64:49)\n    at analyzeMethod (o1js/dist/node/lib/proof_system.js:384:21)\n    at NumberTreeContract.analyzeMethods (o1js/dist/node/lib/zkapp.js:897:59)\n    at NumberTreeContract.compile (o1js/dist/node/lib/zkapp.js:468:32)\n    at file:///Users/work/Documents/mina/mina-protocol-challenge1/build/src/main.js:69:26\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n```\n\ni have no idea why, i have the folder before the git clone and fresh install, and that one does work.. please help\nhttps://github.com/0xlws/mina-protocol-challenge1",
      "author": {
        "id": "896030624375250984",
        "name": "0xlws",
        "discriminator": "0000",
        "nickname": "zeroxlws",
        "color": "#FFFFFF",
        "isBot": false,
        "roles": [
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/embed/avatars/1.png"
      },
      "attachments": [],
      "embeds": [
        {
          "title": "GitHub - 0xlws/mina-protocol-challenge1",
          "url": "https://github.com/0xlws/mina-protocol-challenge1",
          "timestamp": null,
          "description": "Contribute to 0xlws/mina-protocol-challenge1 development by creating an account on GitHub.",
          "color": "#1E2327",
          "thumbnail": {
            "url": "https://images-ext-1.discordapp.net/external/a6XuLKm_XFJiSq2N_zbO8yfhOCZ7RAtyREq2_4U7ANk/https/opengraph.githubassets.com/2d4c49958f3dbbad47a0fac9f20b8a3f3bd878868da25d96a4f6a07490bda345/0xlws/mina-protocol-challenge1",
            "width": 1200,
            "height": 600
          },
          "images": [],
          "fields": []
        }
      ],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1209577013028069436",
      "type": "Default",
      "timestamp": "2024-02-20T23:07:12.76+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "@gregor ive seen you respond to several of these instances, maybe you could clarify this issue for me?",
      "author": {
        "id": "896030624375250984",
        "name": "0xlws",
        "discriminator": "0000",
        "nickname": "zeroxlws",
        "color": "#FFFFFF",
        "isBot": false,
        "roles": [
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/embed/avatars/1.png"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "568421780331692042",
          "name": "mitschabaude",
          "discriminator": "0000",
          "nickname": "gregor",
          "color": "#6991D8",
          "isBot": false,
          "roles": [
            {
              "id": "751144417951219713",
              "name": "Core Engineers",
              "color": "#6991D8",
              "position": 122
            },
            {
              "id": "1075313326499823676",
              "name": "zkApp E2E Tester",
              "color": "#E74C3C",
              "position": 117
            },
            {
              "id": "916351299988107364",
              "name": "zkApps-bootcamp-2021",
              "color": "#F19924",
              "position": 95
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
        }
      ]
    },
    {
      "id": "1209578549296635954",
      "type": "Default",
      "timestamp": "2024-02-20T23:13:19.035+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "nvm, looks like i fixed it by runnin setup commands outside of the sh file, will delete",
      "author": {
        "id": "896030624375250984",
        "name": "0xlws",
        "discriminator": "0000",
        "nickname": "zeroxlws",
        "color": "#FFFFFF",
        "isBot": false,
        "roles": [
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/embed/avatars/1.png"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [
        {
          "emoji": {
            "id": "",
            "name": "\uD83D\uDE4C",
            "code": "raised_hands",
            "isAnimated": false,
            "imageUrl": "https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f64c.svg"
          },
          "count": 1,
          "users": [
            {
              "id": "568421780331692042",
              "name": "mitschabaude",
              "discriminator": "0000",
              "nickname": "gregor",
              "isBot": false,
              "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
            }
          ]
        }
      ],
      "mentions": []
    },
    {
      "id": "1209590593026523226",
      "type": "Default",
      "timestamp": "2024-02-21T00:01:10.484+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "i find it weird, the issue persists, but i just have to run these commands again:\n```sh\nnpm link experimental-zkapp-offchain-storage\nnpm run build && node build/src/main.js\n```\nthen it works",
      "author": {
        "id": "896030624375250984",
        "name": "0xlws",
        "discriminator": "0000",
        "nickname": "zeroxlws",
        "color": "#FFFFFF",
        "isBot": false,
        "roles": [
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/embed/avatars/1.png"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1209591214651998208",
      "type": "Default",
      "timestamp": "2024-02-21T00:03:38.691+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "so, does it persist then or not?",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1209591306376974416",
      "type": "Default",
      "timestamp": "2024-02-21T00:04:00.56+04:00",
      "timestampEdited": "2024-02-21T00:04:05.908+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "it sounds like a case of o1js being loaded twice",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1209591474778542120",
      "type": "Default",
      "timestamp": "2024-02-21T00:04:40.71+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "messes up the global state which determines whether you are in provable code (\"checked computation\")",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1209593100314607677",
      "type": "Default",
      "timestamp": "2024-02-21T00:11:08.268+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "something with node_modules inside the linked repo, i have no idea why sadly... after i use `npm link experimental-zkapp-offchain-storage` it goes past compilation, but then in the linked node modules folder:\n```\nCompiling smart contract...\nDone compiling smart contract\n\n##################################################\n\nSTORE ELIGIBLE ADDRESSES\n\nmain.ts updateTree root received:  14472842460125086645444909368571209079194991627904749620726822601198914470820\nmain.ts updateTree messageTreeRoot received:  14472842460125086645444909368571209079194991627904749620726822601198914470820\n{\n  status: 400,\n  statusText: '<!DOCTYPE html>\\n' +\n    '<html lang=\"en\">\\n' +\n    '<head>\\n' +\n    '<meta charset=\"utf-8\">\\n' +\n    '<title>Error</title>\\n' +\n    '</head>\\n' +\n    '<body>\\n' +\n    '<pre>Error: Cannot find module &#39;../encodings&#39;<br>Require stack:<br>- /Users/work/Documents/mina/mina-protocol-challenge1/docs2/examples/zkapps/06-offchain-storage/experimental-zkapp-offchain-storage/node_modules/iconv-lite/lib/index.js<br>- /Users/work/Documents/mina/mina-protocol-challenge1/docs2/examples/zkapps/06-offchain-storage/experimental-zkapp-offchain-storage/node_modules/raw-body/index.js<br>- /Users/work/Documents/mina/mina-protocol-challenge1/docs2/examples/zkapps/06-offchain-storage/e\n...``` etc etc",
      "author": {
        "id": "896030624375250984",
        "name": "0xlws",
        "discriminator": "0000",
        "nickname": "zeroxlws",
        "color": "#FFFFFF",
        "isBot": false,
        "roles": [
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/embed/avatars/1.png"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1209595567970197606",
      "type": "Default",
      "timestamp": "2024-02-21T00:20:56.603+04:00",
      "timestampEdited": "2024-02-21T00:21:02.077+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "again, I'd check if there are two instances of o1js loaded. this is a common problem",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1209624839854366761",
      "type": "Reply",
      "timestamp": "2024-02-21T02:17:15.564+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "thanks alot, and thanks for the fast response! it was really straight forward.\nproofofwork: screenshot",
      "author": {
        "id": "896030624375250984",
        "name": "0xlws",
        "discriminator": "0000",
        "nickname": "zeroxlws",
        "color": "#FFFFFF",
        "isBot": false,
        "roles": [
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/embed/avatars/1.png"
      },
      "attachments": [
        {
          "id": "1209624839741112330",
          "url": "https://cdn.discordapp.com/attachments/1209576381206237284/1209624839741112330/Screenshot_2024-02-20_at_23.15.33.png?ex=680ab86b&is=680966eb&hm=1576171f1836aaa4a5d2d1da8575559ae4100edfe0f62a2a377f2a4d7d7dcf88&",
          "fileName": "Screenshot_2024-02-20_at_23.15.33.png",
          "fileSizeBytes": 469082
        }
      ],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "568421780331692042",
          "name": "mitschabaude",
          "discriminator": "0000",
          "nickname": "gregor",
          "color": "#6991D8",
          "isBot": false,
          "roles": [
            {
              "id": "751144417951219713",
              "name": "Core Engineers",
              "color": "#6991D8",
              "position": 122
            },
            {
              "id": "1075313326499823676",
              "name": "zkApp E2E Tester",
              "color": "#E74C3C",
              "position": 117
            },
            {
              "id": "916351299988107364",
              "name": "zkApps-bootcamp-2021",
              "color": "#F19924",
              "position": 95
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
        }
      ],
      "reference": {
        "messageId": "1209595567970197606",
        "channelId": "1209576381206237284",
        "guildId": "484437221055922177"
      }
    }
  ],
  "messageCount": 10
}