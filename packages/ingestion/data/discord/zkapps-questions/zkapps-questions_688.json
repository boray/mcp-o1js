{
  "guild": {
    "id": "484437221055922177",
    "name": "Mina Protocol",
    "iconUrl": "https://cdn.discordapp.com/icons/484437221055922177/60f5907d2f7e3804b704a7153cae7768.png?size=512"
  },
  "channel": {
    "id": "1139330728384024577",
    "type": "GuildPublicThread",
    "categoryId": "1047214314349658172",
    "category": "zkapps-questions",
    "name": "\"RangeError: offset is out of bounds\" - Is my circuit too big?",
    "topic": null
  },
  "dateRange": {
    "after": null,
    "before": null
  },
  "exportedAt": "2025-04-24T14:28:45.8907208+04:00",
  "messages": [
    {
      "id": "1139330728384024577",
      "type": "Default",
      "timestamp": "2023-08-11T02:53:33.388+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "I'm getting this error after I needed to increase the memory for nodeJS after getting a \"JavaScript heap out of memory\", so I'm wondering if my circuit is just too big, or if anyone has seen this error for some other reason. I have 2 zkPrograms that compile successfully, but then the following compilation of the contract that relies on the proofs from these zkPrograms is the one that throws this error:\n\n```    RangeError: offset is out of bounds\n        at Uint8Array.set (<anonymous>)\n\n      at passArray8ToWasm0 (node_modules/snarkyjs/dist/node/bindings/compiled/_node_bindings/plonk_wasm.cjs:199:23)\n      at Object.<anonymous>.module.exports.caml_pasta_fq_equal (node_modules/snarkyjs/dist/node/bindings/compiled/_node_bindings/plonk_wasm.cjs:3007:18)\n      at _brB_ (node_modules/snarkyjs/dist/node/bindings/compiled/_node_bindings/snarky_js_node.bc.cjs:162533:34)\n      at caml_call_gen (../../../../builtin/+stdlib.js:32:12)\n      at ../../../../builtin/+stdlib.js:42:14\n      at caml_call_gen (../../../../builtin/+stdlib.js:28:22)\n      at caml_call_gen (../../../../builtin/+stdlib.js:34:12)\n      at caml_call_gen (../../../../builtin/+stdlib.js:24:12)\n      at caml_call2 (node_modules/snarkyjs/dist/node/bindings/compiled/_node_bindings/snarky_js_node.bc.cjs:7512:37)```",
      "author": {
        "id": "1050599472071180389",
        "name": "chrlyz",
        "discriminator": "0000",
        "nickname": "chrlyz",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1150768164850913322",
            "name": "zkIgnite Cohort 2",
            "color": "#E97404",
            "position": 96
          },
          {
            "id": "1205541869375979601",
            "name": "UMT",
            "color": "#FFFFFF",
            "position": 22
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/1050599472071180389/4a840b88bc5da50d607bf7cf7749d9ef.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [
        {
          "emoji": {
            "id": "",
            "name": "\uD83D\uDC4D",
            "code": "thumbsup",
            "isAnimated": false,
            "imageUrl": "https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d.svg"
          },
          "count": 1,
          "users": [
            {
              "id": "790135754411343882",
              "name": "coldstar1993",
              "discriminator": "0000",
              "nickname": "coldStar1993",
              "isBot": false,
              "avatarUrl": "https://cdn.discordapp.com/avatars/790135754411343882/4e03c5dfc78443f624379f2476b23380.png?size=512"
            }
          ]
        }
      ],
      "mentions": []
    },
    {
      "id": "1139378103660068864",
      "type": "Default",
      "timestamp": "2023-08-11T06:01:48.534+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Here's the code if you want to give it a closer look:\nhttps://github.com/chrlyz/proof_of_events/tree/RangeError_when_two_zkPrograms",
      "author": {
        "id": "1050599472071180389",
        "name": "chrlyz",
        "discriminator": "0000",
        "nickname": "chrlyz",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1150768164850913322",
            "name": "zkIgnite Cohort 2",
            "color": "#E97404",
            "position": 96
          },
          {
            "id": "1205541869375979601",
            "name": "UMT",
            "color": "#FFFFFF",
            "position": 22
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/1050599472071180389/4a840b88bc5da50d607bf7cf7749d9ef.png?size=512"
      },
      "attachments": [],
      "embeds": [
        {
          "title": "GitHub - chrlyz/proof_of_events at RangeError_when_two_zkPrograms",
          "url": "https://github.com/chrlyz/proof_of_events/tree/RangeError_when_two_zkPrograms",
          "timestamp": null,
          "description": "Mina smart contract and zkPrograms to power an auditable, resilient, and credibly neutral social media platform - GitHub - chrlyz/proof_of_events at RangeError_when_two_zkPrograms",
          "color": "#1E2327",
          "thumbnail": {
            "url": "https://images-ext-1.discordapp.net/external/zEvX0Sy5rM5jatvPkT6b_WXIMD3IPiTKnJl6HhRmY1I/https/opengraph.githubassets.com/742cda6d856e198aa9d90404e3253985f3edd0ea504b7052de6ac18245bcb094/chrlyz/proof_of_events",
            "width": 1200,
            "height": 600
          },
          "images": [],
          "fields": []
        }
      ],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1139718736799072256",
      "type": "Default",
      "timestamp": "2023-08-12T04:35:21.803+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "I was able to successfully compile the contract after lumping together the 2 zkPrograms into 1, but now when I'm trying to prove a transaction, I get this other error:\n\n```  console.error\n    Error when proving EventsContract.update()\n\n      at node_modules/snarkyjs/src/lib/account_update.ts:2062:17\n      at Object.run (node_modules/snarkyjs/src/lib/proof_system.ts:822:16)\n      at createZkappProof (node_modules/snarkyjs/src/lib/account_update.ts:2050:21)\n      at addProof (node_modules/snarkyjs/src/lib/account_update.ts:2024:15)\n      at addMissingProofs (node_modules/snarkyjs/src/lib/account_update.ts:1985:42)\n      at Object.prove (node_modules/snarkyjs/src/lib/mina.ts:307:38)\n```",
      "author": {
        "id": "1050599472071180389",
        "name": "chrlyz",
        "discriminator": "0000",
        "nickname": "chrlyz",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1150768164850913322",
            "name": "zkIgnite Cohort 2",
            "color": "#E97404",
            "position": 96
          },
          {
            "id": "1205541869375979601",
            "name": "UMT",
            "color": "#FFFFFF",
            "position": 22
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/1050599472071180389/4a840b88bc5da50d607bf7cf7749d9ef.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1139718775512498226",
      "type": "Default",
      "timestamp": "2023-08-12T04:35:31.033+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "``` FAIL  src/Posts.test.ts (486.342 s)\n  the 'EventsContract' and the 'Posts' zkProgram\n    ✕ updates the state of the 'EventsContract', when publishing the genesis post (102259 ms)\n    ○ skipped generates and deploys the 'EventsContract'\n\n  ● the 'EventsContract' and the 'Posts' zkProgram › updates the state of the 'EventsContract', when publishing the genesis post\n\n    curve point must not be the point at infinity\n\n      at failwith (ocaml/ocaml/stdlib.ml:29:34)\n      at g (src/lib/pickles_types/or_infinity.ml:19:7)\n      at opening_proof_of_backend_exn (src/lib/crypto/kimchi_backend/common/plonk_dlog_proof.ml:228:15)\n      at of_backend (src/lib/crypto/kimchi_backend/common/plonk_dlog_proof.ml:250:17)\n      at _o9b_ (src/lib/crypto/kimchi_backend/common/plonk_dlog_proof.ml:395:5)\n      at withThreadPool (snarkyjs/src/bindings/js/node/node-backend.js:55:14)\n      at prettifyStacktracePromise (snarkyjs/src/lib/errors.ts:137:12)\n      at node_modules/snarkyjs/src/lib/account_update.ts:2060:16\n      at Object.run (snarkyjs/src/lib/proof_system.ts:822:16)\n      at createZkappProof (snarkyjs/src/lib/account_update.ts:2050:21)\n      at addProof (snarkyjs/src/lib/account_update.ts:2024:15)\n      at addMissingProofs (snarkyjs/src/lib/account_update.ts:1985:42)\n      at Object.prove (snarkyjs/src/lib/mina.ts:307:38)\n      at Object.<anonymous> (src/Posts.test.ts:248:5)```",
      "author": {
        "id": "1050599472071180389",
        "name": "chrlyz",
        "discriminator": "0000",
        "nickname": "chrlyz",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1150768164850913322",
            "name": "zkIgnite Cohort 2",
            "color": "#E97404",
            "position": 96
          },
          {
            "id": "1205541869375979601",
            "name": "UMT",
            "color": "#FFFFFF",
            "position": 22
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/1050599472071180389/4a840b88bc5da50d607bf7cf7749d9ef.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1139719029158854676",
      "type": "Default",
      "timestamp": "2023-08-12T04:36:31.507+04:00",
      "timestampEdited": "2023-08-24T08:03:54.84+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Code with 1 zkProgram instead of 2:\nhttps://github.com/chrlyz/proof_of_events/tree/Error_to_prove_when_one_zkProgram",
      "author": {
        "id": "1050599472071180389",
        "name": "chrlyz",
        "discriminator": "0000",
        "nickname": "chrlyz",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1150768164850913322",
            "name": "zkIgnite Cohort 2",
            "color": "#E97404",
            "position": 96
          },
          {
            "id": "1205541869375979601",
            "name": "UMT",
            "color": "#FFFFFF",
            "position": 22
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/1050599472071180389/4a840b88bc5da50d607bf7cf7749d9ef.png?size=512"
      },
      "attachments": [],
      "embeds": [
        {
          "title": "GitHub - chrlyz/proof_of_events at Error_to_prove_when_one_zkProgram",
          "url": "https://github.com/chrlyz/proof_of_events/tree/Error_to_prove_when_one_zkProgram",
          "timestamp": null,
          "description": "Mina smart contract and zkPrograms to power an auditable, resilient, and credibly neutral social media platform - GitHub - chrlyz/proof_of_events at Error_to_prove_when_one_zkProgram",
          "color": "#1E2327",
          "thumbnail": {
            "url": "https://images-ext-1.discordapp.net/external/zEvX0Sy5rM5jatvPkT6b_WXIMD3IPiTKnJl6HhRmY1I/https/opengraph.githubassets.com/742cda6d856e198aa9d90404e3253985f3edd0ea504b7052de6ac18245bcb094/chrlyz/proof_of_events",
            "width": 1200,
            "height": 600
          },
          "images": [],
          "fields": []
        }
      ],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1143452299944009769",
      "type": "Default",
      "timestamp": "2023-08-22T11:51:12.623+04:00",
      "timestampEdited": "2023-08-24T08:03:22.641+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "After reducing the number of methods and operations by simplifying the logic for merging proofs, the version using 1 zkProgram is now able to prove the transaction, so it looks like the issue is indeed related to some memory constraints:\nhttps://github.com/chrlyz/proof_of_events/tree/Error_to_prove_when_one_zkProgram_fixed",
      "author": {
        "id": "1050599472071180389",
        "name": "chrlyz",
        "discriminator": "0000",
        "nickname": "chrlyz",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1150768164850913322",
            "name": "zkIgnite Cohort 2",
            "color": "#E97404",
            "position": 96
          },
          {
            "id": "1205541869375979601",
            "name": "UMT",
            "color": "#FFFFFF",
            "position": 22
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/1050599472071180389/4a840b88bc5da50d607bf7cf7749d9ef.png?size=512"
      },
      "attachments": [],
      "embeds": [
        {
          "title": "GitHub - chrlyz/proof_of_events at Error_to_prove_when_one_zkProgra...",
          "url": "https://github.com/chrlyz/proof_of_events/tree/Error_to_prove_when_one_zkProgram_fixed",
          "timestamp": null,
          "description": "Mina smart contract and zkPrograms to power an auditable, resilient, and credibly neutral social media platform - GitHub - chrlyz/proof_of_events at Error_to_prove_when_one_zkProgram_fixed",
          "color": "#1E2327",
          "thumbnail": {
            "url": "https://images-ext-1.discordapp.net/external/zEvX0Sy5rM5jatvPkT6b_WXIMD3IPiTKnJl6HhRmY1I/https/opengraph.githubassets.com/742cda6d856e198aa9d90404e3253985f3edd0ea504b7052de6ac18245bcb094/chrlyz/proof_of_events",
            "width": 1200,
            "height": 600
          },
          "images": [],
          "fields": []
        }
      ],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1143459134126178334",
      "type": "Default",
      "timestamp": "2023-08-22T12:18:22.019+04:00",
      "timestampEdited": "2023-08-22T12:37:15.637+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "For the version using 2 zkPrograms, it looks like simplifying the logic for merging proofs isn't an enough reduction in size for the circuit, so it keeps throwing the same error while compiling the contract.\n\nFrom these comments https://discord.com/channels/484437221055922177/1053485689037148230/1055447099577204767 I suspect those memory constraints come from wasm's current 32-bit memory addressing hard limit, so probably no much can be done on the side of Mina/SnarkyJS until wasm64, but I still wonder if this interpretation is correct and would appreciate clarification by people with more in-depth expertize \uD83D\uDE03  \n\nI can think of workarounds for these kind of constraints, but I really look forward for BIG CIRCUITS \uD83D\uDC7D",
      "author": {
        "id": "1050599472071180389",
        "name": "chrlyz",
        "discriminator": "0000",
        "nickname": "chrlyz",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1150768164850913322",
            "name": "zkIgnite Cohort 2",
            "color": "#E97404",
            "position": 96
          },
          {
            "id": "1205541869375979601",
            "name": "UMT",
            "color": "#FFFFFF",
            "position": 22
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/1050599472071180389/4a840b88bc5da50d607bf7cf7749d9ef.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [
        {
          "emoji": {
            "id": "",
            "name": "\uD83E\uDD14",
            "code": "thinking",
            "isAnimated": false,
            "imageUrl": "https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f914.svg"
          },
          "count": 1,
          "users": [
            {
              "id": "301752126491721730",
              "name": "blockbeard",
              "discriminator": "0000",
              "nickname": "angus_m",
              "isBot": false,
              "avatarUrl": "https://cdn.discordapp.com/avatars/301752126491721730/0a8d7f37a46cb3c2ca757f772e60e497.png?size=512"
            }
          ]
        }
      ],
      "mentions": []
    },
    {
      "id": "1148240710026395738",
      "type": "Default",
      "timestamp": "2023-09-04T16:58:38.551+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Yeah from your description it indeed sounds related to the circuit size... Sorry for not being able to tell you more, would quite a bit of debugging to get to the root of this. Happy to do that whenever I have time to focus on circuit size / memory constraints more generally",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1148364446994018354",
      "type": "Reply",
      "timestamp": "2023-09-05T01:10:19.743+04:00",
      "timestampEdited": "2023-09-05T01:14:07.464+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Thanks, no problem. I was just playing with my code here and the logic itself isn't even right. I already implemented a proper solution for what I was trying to do. Just wanted to know if the error was circuit size related or those error messages could be caused by something else. I also didn't expect having a circuit size issue even after being able to compile the zkPrograms and contract",
      "author": {
        "id": "1050599472071180389",
        "name": "chrlyz",
        "discriminator": "0000",
        "nickname": "chrlyz",
        "color": "#FA7504",
        "isBot": false,
        "roles": [
          {
            "id": "1182371055923376168",
            "name": "Mina Navigator",
            "color": "#FA7504",
            "position": 100
          },
          {
            "id": "1150768164850913322",
            "name": "zkIgnite Cohort 2",
            "color": "#E97404",
            "position": 96
          },
          {
            "id": "1205541869375979601",
            "name": "UMT",
            "color": "#FFFFFF",
            "position": 22
          },
          {
            "id": "1220064445863038996",
            "name": "zkApps",
            "color": "#FFFFFF",
            "position": 19
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/1050599472071180389/4a840b88bc5da50d607bf7cf7749d9ef.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "568421780331692042",
          "name": "mitschabaude",
          "discriminator": "0000",
          "nickname": "gregor",
          "color": "#6991D8",
          "isBot": false,
          "roles": [
            {
              "id": "751144417951219713",
              "name": "Core Engineers",
              "color": "#6991D8",
              "position": 122
            },
            {
              "id": "1075313326499823676",
              "name": "zkApp E2E Tester",
              "color": "#E74C3C",
              "position": 117
            },
            {
              "id": "916351299988107364",
              "name": "zkApps-bootcamp-2021",
              "color": "#F19924",
              "position": 95
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
        }
      ],
      "reference": {
        "messageId": "1148240710026395738",
        "channelId": "1139330728384024577",
        "guildId": "484437221055922177"
      }
    }
  ],
  "messageCount": 9
}