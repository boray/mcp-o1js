{
  "guild": {
    "id": "484437221055922177",
    "name": "Mina Protocol",
    "iconUrl": "https://cdn.discordapp.com/icons/484437221055922177/60f5907d2f7e3804b704a7153cae7768.png?size=512"
  },
  "channel": {
    "id": "1123378515207786606",
    "type": "GuildPublicThread",
    "categoryId": "1047214314349658172",
    "category": "zkapps-questions",
    "name": "Factory pattern. Fee. Transaction.",
    "topic": null
  },
  "dateRange": {
    "after": null,
    "before": null
  },
  "exportedAt": "2025-04-24T15:30:11.1243582+04:00",
  "messages": [
    {
      "id": "1123378515207786606",
      "type": "Default",
      "timestamp": "2023-06-28T02:25:09.389+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Hi everybody.\nIs it possible to create a smart contract from a smart contract?\nI have already tried to create a smart contract like this, however, a commission of 1 MINA is required, how can I send the amount with the transaction, I have not found this in the documentation yet?",
      "author": {
        "id": "631608967214399509",
        "name": "whitecoon",
        "discriminator": "0000",
        "nickname": "white coon",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/631608967214399509/bea56f00c3b9e606510db03ade07348d.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1123530080510025778",
      "type": "Default",
      "timestamp": "2023-06-28T12:27:25.373+04:00",
      "timestampEdited": "2023-06-28T12:27:39.247+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "checkout this section: https://docs.minaprotocol.com/zkapps/snarkyjs/interact-with-mina#payments-and-more-on-public-inputs",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1123530234688446534",
      "type": "Default",
      "timestamp": "2023-06-28T12:28:02.132+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "on how to pay MINA from a zkapp",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1123530825066086472",
      "type": "Default",
      "timestamp": "2023-06-28T12:30:22.889+04:00",
      "timestampEdited": "2023-06-28T12:30:55.489+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "actually, sorry @white coon, just realized that section is probably not super helpful if you're paying the account creation fee from a zkApp.\n\nTry this in your smart contract method:\n```ts\nthis.balance.subInPlace(Mina.accountCreationFee());\n```",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "631608967214399509",
          "name": "whitecoon",
          "discriminator": "0000",
          "nickname": "white coon",
          "color": null,
          "isBot": false,
          "roles": [],
          "avatarUrl": "https://cdn.discordapp.com/avatars/631608967214399509/bea56f00c3b9e606510db03ade07348d.png?size=512"
        }
      ]
    },
    {
      "id": "1123532868518416445",
      "type": "Reply",
      "timestamp": "2023-06-28T12:38:30.086+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Thanks, I'll try now",
      "author": {
        "id": "631608967214399509",
        "name": "whitecoon",
        "discriminator": "0000",
        "nickname": "white coon",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/631608967214399509/bea56f00c3b9e606510db03ade07348d.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "568421780331692042",
          "name": "mitschabaude",
          "discriminator": "0000",
          "nickname": "gregor",
          "color": "#6991D8",
          "isBot": false,
          "roles": [
            {
              "id": "751144417951219713",
              "name": "Core Engineers",
              "color": "#6991D8",
              "position": 122
            },
            {
              "id": "1075313326499823676",
              "name": "zkApp E2E Tester",
              "color": "#E74C3C",
              "position": 117
            },
            {
              "id": "916351299988107364",
              "name": "zkApps-bootcamp-2021",
              "color": "#F19924",
              "position": 95
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
        }
      ],
      "reference": {
        "messageId": "1123530825066086472",
        "channelId": "1123378515207786606",
        "guildId": "484437221055922177"
      }
    },
    {
      "id": "1123537757810212885",
      "type": "Reply",
      "timestamp": "2023-06-28T12:57:55.784+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "no, it did not work, in theory there should be some other methods  \n```\nInvalid fee excess.\n    This means that balance changes in your transaction do not sum up to the amount of fees needed.\n    Here's the list of balance changes:\n\n    Account update #1) -1.00 MINA\n\n    Total change: -1.00 MINA\n\n    If there are no new accounts created in your transaction, then this sum should be equal to 0.00 MINA.\n    If you are creating new accounts -- by updating accounts that didn't exist yet --\n    then keep in mind the 1.00 MINA account creation fee, and make sure that the sum equals\n    -1.00 times the number of newly created accounts.\n```",
      "author": {
        "id": "631608967214399509",
        "name": "whitecoon",
        "discriminator": "0000",
        "nickname": "white coon",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/631608967214399509/bea56f00c3b9e606510db03ade07348d.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "568421780331692042",
          "name": "mitschabaude",
          "discriminator": "0000",
          "nickname": "gregor",
          "color": "#6991D8",
          "isBot": false,
          "roles": [
            {
              "id": "751144417951219713",
              "name": "Core Engineers",
              "color": "#6991D8",
              "position": 122
            },
            {
              "id": "1075313326499823676",
              "name": "zkApp E2E Tester",
              "color": "#E74C3C",
              "position": 117
            },
            {
              "id": "916351299988107364",
              "name": "zkApps-bootcamp-2021",
              "color": "#F19924",
              "position": 95
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
        }
      ],
      "reference": {
        "messageId": "1123530825066086472",
        "channelId": "1123378515207786606",
        "guildId": "484437221055922177"
      }
    },
    {
      "id": "1123538261248311367",
      "type": "Default",
      "timestamp": "2023-06-28T12:59:55.813+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "well, looks like your transaction doesn't create any new accounts, so you also don't need the account creation fee",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1123538626165346304",
      "type": "Default",
      "timestamp": "2023-06-28T13:01:22.816+04:00",
      "timestampEdited": "2023-06-28T13:01:30.905+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "@white coon what was the problem which caused you to search for a way to pay the account creation fee? maybe there's a different issue altogether?",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "631608967214399509",
          "name": "whitecoon",
          "discriminator": "0000",
          "nickname": "white coon",
          "color": null,
          "isBot": false,
          "roles": [],
          "avatarUrl": "https://cdn.discordapp.com/avatars/631608967214399509/bea56f00c3b9e606510db03ade07348d.png?size=512"
        }
      ]
    },
    {
      "id": "1123538914049806346",
      "type": "Default",
      "timestamp": "2023-06-28T13:02:31.453+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "right now, there is just one account update in your transaction! if you want to deploy a zkapp, you probably should call `otherZkapp.deploy()`",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1123539435091398769",
      "type": "Default",
      "timestamp": "2023-06-28T13:04:35.679+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "@gregor a few minutes",
      "author": {
        "id": "631608967214399509",
        "name": "whitecoon",
        "discriminator": "0000",
        "nickname": "white coon",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/631608967214399509/bea56f00c3b9e606510db03ade07348d.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "568421780331692042",
          "name": "mitschabaude",
          "discriminator": "0000",
          "nickname": "gregor",
          "color": "#6991D8",
          "isBot": false,
          "roles": [
            {
              "id": "751144417951219713",
              "name": "Core Engineers",
              "color": "#6991D8",
              "position": 122
            },
            {
              "id": "1075313326499823676",
              "name": "zkApp E2E Tester",
              "color": "#E74C3C",
              "position": 117
            },
            {
              "id": "916351299988107364",
              "name": "zkApps-bootcamp-2021",
              "color": "#F19924",
              "position": 95
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
        }
      ]
    },
    {
      "id": "1123540047900192839",
      "type": "Default",
      "timestamp": "2023-06-28T13:07:01.784+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "I want to choose this code\n```TS\n  @method newContract() {\n\n    this.balance.subInPlace(Mina.accountCreationFee());\n\n    const zkAppPrivateKeyAdd = PrivateKey.random();\n    const zkAppAddressAdd = zkAppPrivateKeyAdd.toPublicKey();\n    const zkAppAdd = new OtherContract(zkAppAddressAdd);\n  }\n```\nnow\n```TS\n  @method newContract() {\n    this.balance.subInPlace(Mina.accountCreationFee());\n\n    const zkAppPrivateKeyAdd = PrivateKey.random();\n    const zkAppAddressAdd = zkAppPrivateKeyAdd.toPublicKey();\n    const zkAppAdd = new OtherContract(zkAppAddressAdd);\n\n    zkAppAdd.deploy();\n  }\n```\noutput\n```\nCheck signature: Invalid signature on account_update 1 for key B62qicNUFD48aZxe7bNU6hGsB23a6HMXRL1CLtFW5nfxvU2DRM8W9at\n```\nwhat exactly am I doing wrong?",
      "author": {
        "id": "631608967214399509",
        "name": "whitecoon",
        "discriminator": "0000",
        "nickname": "white coon",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/631608967214399509/bea56f00c3b9e606510db03ade07348d.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1123541721448464394",
      "type": "Default",
      "timestamp": "2023-06-28T13:13:40.789+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "in test\n```TS\n    const txn = await Mina.transaction(deployerAccount, () => {\n      zkAppAdd.newContract();\n    });\n    await txn.prove();\n    await txn.sign([deployerKey]).send();\n```\n\nadded `AccountUpdate.fundNewAccount(this.sender);` but don't work",
      "author": {
        "id": "631608967214399509",
        "name": "whitecoon",
        "discriminator": "0000",
        "nickname": "white coon",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/631608967214399509/bea56f00c3b9e606510db03ade07348d.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1123547097409531924",
      "type": "Default",
      "timestamp": "2023-06-28T13:35:02.518+04:00",
      "timestampEdited": "2023-06-28T13:35:43.226+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Nice, so I think the only part that's missing is that you also need to _sign_ the transcation with the zkAppKey, since you are making an update to the zkApp account (setting the verification key) which require a signature.\n(don't use `AccountUpdate.fundNewAccount(this.sender)` - we already have the fee part covered with `this.balance.subInPlace()`)\n```diff\nconst txn = await Mina.transaction(deployerAccount, () => {\n  zkAppAdd.newContract();\n});\nawait txn.prove();\n- await txn.sign([deployerKey]).send();\n+ await txn.sign([deployerKey, zkAppPrivateKeyAdd]).send();\n```",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1123547362409848832",
      "type": "Default",
      "timestamp": "2023-06-28T13:36:05.699+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "btw, you'll need to create the zkapp private key outside the method call for this to work",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [
        {
          "emoji": {
            "id": "",
            "name": "\uD83D\uDC4D",
            "code": "thumbsup",
            "isAnimated": false,
            "imageUrl": "https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d.svg"
          },
          "count": 1,
          "users": [
            {
              "id": "631608967214399509",
              "name": "whitecoon",
              "discriminator": "0000",
              "nickname": "white coon",
              "isBot": false,
              "avatarUrl": "https://cdn.discordapp.com/avatars/631608967214399509/bea56f00c3b9e606510db03ade07348d.png?size=512"
            }
          ]
        }
      ],
      "mentions": []
    },
    {
      "id": "1123547778556117124",
      "type": "Default",
      "timestamp": "2023-06-28T13:37:44.916+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "@gregor Thank you!!!",
      "author": {
        "id": "631608967214399509",
        "name": "whitecoon",
        "discriminator": "0000",
        "nickname": "white coon",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/631608967214399509/bea56f00c3b9e606510db03ade07348d.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "568421780331692042",
          "name": "mitschabaude",
          "discriminator": "0000",
          "nickname": "gregor",
          "color": "#6991D8",
          "isBot": false,
          "roles": [
            {
              "id": "751144417951219713",
              "name": "Core Engineers",
              "color": "#6991D8",
              "position": 122
            },
            {
              "id": "1075313326499823676",
              "name": "zkApp E2E Tester",
              "color": "#E74C3C",
              "position": 117
            },
            {
              "id": "916351299988107364",
              "name": "zkApps-bootcamp-2021",
              "color": "#F19924",
              "position": 95
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
        }
      ]
    },
    {
      "id": "1123548001818906704",
      "type": "Default",
      "timestamp": "2023-06-28T13:38:38.146+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "```ts\n  @method newContract(zkAppAddressAdd: PublicKey) {\n    this.balance.subInPlace(Mina.accountCreationFee());\n    const zkAppAdd = new OtherContract(zkAppAddressAdd);\n    zkAppAdd.deploy();\n  }\n```\n```TS\n    const zkAppPrivateKeyAdd = PrivateKey.random();\n    const zkAppAddressAdd = zkAppPrivateKeyAdd.toPublicKey();\n\n    const txn = await Mina.transaction(deployerAccount, () => {\n      zkAppAdd.newContract(zkAppAddressAdd);\n    });\n    await txn.prove();\n    await txn.sign([deployerKey, zkAppPrivateKeyAdd]).send();\n```",
      "author": {
        "id": "631608967214399509",
        "name": "whitecoon",
        "discriminator": "0000",
        "nickname": "white coon",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/631608967214399509/bea56f00c3b9e606510db03ade07348d.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1123559097397157969",
      "type": "Default",
      "timestamp": "2023-06-28T14:22:43.538+04:00",
      "timestampEdited": "2023-06-28T14:23:04.029+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "@gregor so, I hurried a little, once the test passed, and now it gives out\n```\nCan't evaluate prover code outside an as_prover block\n\n```\nI did not change anything in the code, can you tell me what this message means?",
      "author": {
        "id": "631608967214399509",
        "name": "whitecoon",
        "discriminator": "0000",
        "nickname": "white coon",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/631608967214399509/bea56f00c3b9e606510db03ade07348d.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "568421780331692042",
          "name": "mitschabaude",
          "discriminator": "0000",
          "nickname": "gregor",
          "color": "#6991D8",
          "isBot": false,
          "roles": [
            {
              "id": "751144417951219713",
              "name": "Core Engineers",
              "color": "#6991D8",
              "position": 122
            },
            {
              "id": "1075313326499823676",
              "name": "zkApp E2E Tester",
              "color": "#E74C3C",
              "position": 117
            },
            {
              "id": "916351299988107364",
              "name": "zkApps-bootcamp-2021",
              "color": "#F19924",
              "position": 95
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
        }
      ]
    },
    {
      "id": "1123566464134303784",
      "type": "Default",
      "timestamp": "2023-06-28T14:51:59.905+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "the latest snarkyjs version replaces this error with a much more helpful one, see here: https://github.com/o1-labs/snarkyjs/pull/998",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1123566572355727431",
      "type": "Default",
      "timestamp": "2023-06-28T14:52:25.707+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "to understand why it happens in your case I would need to see the stack trace",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1123569252981538877",
      "type": "Default",
      "timestamp": "2023-06-28T15:03:04.818+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Five minutes",
      "author": {
        "id": "631608967214399509",
        "name": "whitecoon",
        "discriminator": "0000",
        "nickname": "white coon",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/631608967214399509/bea56f00c3b9e606510db03ade07348d.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1123569883792281670",
      "type": "Default",
      "timestamp": "2023-06-28T15:05:35.215+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "code is the same as above",
      "author": {
        "id": "631608967214399509",
        "name": "whitecoon",
        "discriminator": "0000",
        "nickname": "white coon",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/631608967214399509/bea56f00c3b9e606510db03ade07348d.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1123573547864948866",
      "type": "Default",
      "timestamp": "2023-06-28T15:20:08.798+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "@gregor Are you talking about this?",
      "author": {
        "id": "631608967214399509",
        "name": "whitecoon",
        "discriminator": "0000",
        "nickname": "white coon",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/631608967214399509/bea56f00c3b9e606510db03ade07348d.png?size=512"
      },
      "attachments": [
        {
          "id": "1123573547432947722",
          "url": "https://cdn.discordapp.com/attachments/1123378515207786606/1123573547432947722/message.txt?ex=680b6fe8&is=680a1e68&hm=f8bdc1ab6f57e8ff1f4f2112c27c279274652e884a84cb413c96d0e966448b57&",
          "fileName": "message.txt",
          "fileSizeBytes": 2444
        }
      ],
      "embeds": [],
      "stickers": [],
      "reactions": [
        {
          "emoji": {
            "id": "",
            "name": "\uD83D\uDC4D",
            "code": "thumbsup",
            "isAnimated": false,
            "imageUrl": "https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44d.svg"
          },
          "count": 1,
          "users": [
            {
              "id": "568421780331692042",
              "name": "mitschabaude",
              "discriminator": "0000",
              "nickname": "gregor",
              "isBot": false,
              "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
            }
          ]
        }
      ],
      "mentions": [
        {
          "id": "568421780331692042",
          "name": "mitschabaude",
          "discriminator": "0000",
          "nickname": "gregor",
          "color": "#6991D8",
          "isBot": false,
          "roles": [
            {
              "id": "751144417951219713",
              "name": "Core Engineers",
              "color": "#6991D8",
              "position": 122
            },
            {
              "id": "1075313326499823676",
              "name": "zkApp E2E Tester",
              "color": "#E74C3C",
              "position": 117
            },
            {
              "id": "916351299988107364",
              "name": "zkApps-bootcamp-2021",
              "color": "#F19924",
              "position": 95
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
        }
      ]
    },
    {
      "id": "1123575981060395018",
      "type": "Default",
      "timestamp": "2023-06-28T15:29:48.917+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "update snarkyjs\n```\n    x.toConstant() was called on a variable field element `x` in provable code.\n    This is not supported, because variables represent an abstract computation,\n    which only carries actual values during proving, but not during compiling.\n\n    Also, reading out JS values means that whatever you're doing with those values will no longer be\n    linked to the original variable in the proof, which makes this pattern prone to security holes.\n\n    You can check whether your field element is a variable or a constant by using x.isConstant().\n\n    To inspect values for debugging, use Provable.log(x). For more advanced use cases,\n    there is `Provable.asProver(() => { ... })` which allows you to use x.toConstant() inside the callback.\n    Warning: whatever happens inside asProver() will not be part of the zk proof.\n```",
      "author": {
        "id": "631608967214399509",
        "name": "whitecoon",
        "discriminator": "0000",
        "nickname": "white coon",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/631608967214399509/bea56f00c3b9e606510db03ade07348d.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1123576812220469319",
      "type": "Default",
      "timestamp": "2023-06-28T15:33:07.081+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "problem in `zkAppAdd.deploy();`",
      "author": {
        "id": "631608967214399509",
        "name": "whitecoon",
        "discriminator": "0000",
        "nickname": "white coon",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/631608967214399509/bea56f00c3b9e606510db03ade07348d.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1123587809324830811",
      "type": "Default",
      "timestamp": "2023-06-28T16:16:48.995+04:00",
      "timestampEdited": "2023-06-28T16:17:10.017+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "ok, I see what's going wrong. It seems deploy() doesn't work in provable code with a variable `PublicKey`.\nyou can make it work by not passing in the zkapp public key as method argument. that way, it will be a constant.\nfor example, you could get the zkapp public key from global scope or store it as property on the `SmartContract`",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1123590758801358879",
      "type": "Default",
      "timestamp": "2023-06-28T16:28:32.205+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "@gregor \nso?\n```ts\nthis.addr.set(zkAppAddressAdd);\n```",
      "author": {
        "id": "631608967214399509",
        "name": "whitecoon",
        "discriminator": "0000",
        "nickname": "white coon",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/631608967214399509/bea56f00c3b9e606510db03ade07348d.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "568421780331692042",
          "name": "mitschabaude",
          "discriminator": "0000",
          "nickname": "gregor",
          "color": "#6991D8",
          "isBot": false,
          "roles": [
            {
              "id": "751144417951219713",
              "name": "Core Engineers",
              "color": "#6991D8",
              "position": 122
            },
            {
              "id": "1075313326499823676",
              "name": "zkApp E2E Tester",
              "color": "#E74C3C",
              "position": 117
            },
            {
              "id": "916351299988107364",
              "name": "zkApps-bootcamp-2021",
              "color": "#F19924",
              "position": 95
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
        }
      ]
    },
    {
      "id": "1123590889856577606",
      "type": "Default",
      "timestamp": "2023-06-28T16:29:03.451+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "no, I didn't mean store it as on-chain state",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [
        {
          "emoji": {
            "id": "",
            "name": "\uD83D\uDC4C",
            "code": "ok_hand",
            "isAnimated": false,
            "imageUrl": "https://cdn.jsdelivr.net/gh/twitter/twemoji@latest/assets/svg/1f44c.svg"
          },
          "count": 1,
          "users": [
            {
              "id": "631608967214399509",
              "name": "whitecoon",
              "discriminator": "0000",
              "nickname": "white coon",
              "isBot": false,
              "avatarUrl": "https://cdn.discordapp.com/avatars/631608967214399509/bea56f00c3b9e606510db03ade07348d.png?size=512"
            }
          ]
        }
      ],
      "mentions": []
    },
    {
      "id": "1123591216894845029",
      "type": "Default",
      "timestamp": "2023-06-28T16:30:21.423+04:00",
      "timestampEdited": "2023-06-28T16:30:41.683+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "more like this:\n```ts\nlet zkAppAddress = zkappKey.toPublicKey();\n\nclass MyContract extends SmartContract {\n  @method myMethod() {\n    let zkapp = new MyZkapp(zkappAddress);\n    zkapp.deploy();\n  }\n}\n```",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1123592229735383131",
      "type": "Default",
      "timestamp": "2023-06-28T16:34:22.903+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "understood, I understand correctly that in the future it will be possible to create keys from the front and transfer them to a smart contract for deployment?",
      "author": {
        "id": "631608967214399509",
        "name": "whitecoon",
        "discriminator": "0000",
        "nickname": "white coon",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/631608967214399509/bea56f00c3b9e606510db03ade07348d.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1123594890618605568",
      "type": "Default",
      "timestamp": "2023-06-28T16:44:57.307+04:00",
      "timestampEdited": "2023-06-28T16:46:02.027+04:00",
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "@gregor \nhow do transfer  `zkappKey` to a smart contract",
      "author": {
        "id": "631608967214399509",
        "name": "whitecoon",
        "discriminator": "0000",
        "nickname": "white coon",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/631608967214399509/bea56f00c3b9e606510db03ade07348d.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "568421780331692042",
          "name": "mitschabaude",
          "discriminator": "0000",
          "nickname": "gregor",
          "color": "#6991D8",
          "isBot": false,
          "roles": [
            {
              "id": "751144417951219713",
              "name": "Core Engineers",
              "color": "#6991D8",
              "position": 122
            },
            {
              "id": "1075313326499823676",
              "name": "zkApp E2E Tester",
              "color": "#E74C3C",
              "position": 117
            },
            {
              "id": "916351299988107364",
              "name": "zkApps-bootcamp-2021",
              "color": "#F19924",
              "position": 95
            }
          ],
          "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
        }
      ]
    },
    {
      "id": "1123617759792726036",
      "type": "Reply",
      "timestamp": "2023-06-28T18:15:49.743+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "I don't get what you mean with \"create keys from the front and transfer them to a smart contract\"",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": [
        {
          "id": "631608967214399509",
          "name": "whitecoon",
          "discriminator": "0000",
          "nickname": "white coon",
          "color": null,
          "isBot": false,
          "roles": [],
          "avatarUrl": "https://cdn.discordapp.com/avatars/631608967214399509/bea56f00c3b9e606510db03ade07348d.png?size=512"
        }
      ],
      "reference": {
        "messageId": "1123592229735383131",
        "channelId": "1123378515207786606",
        "guildId": "484437221055922177"
      }
    },
    {
      "id": "1123617991163134044",
      "type": "Default",
      "timestamp": "2023-06-28T18:16:44.906+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "you don't \"transfer\" things. you use a JS variable that's in scope",
      "author": {
        "id": "568421780331692042",
        "name": "mitschabaude",
        "discriminator": "0000",
        "nickname": "gregor",
        "color": "#6991D8",
        "isBot": false,
        "roles": [
          {
            "id": "751144417951219713",
            "name": "Core Engineers",
            "color": "#6991D8",
            "position": 122
          },
          {
            "id": "1075313326499823676",
            "name": "zkApp E2E Tester",
            "color": "#E74C3C",
            "position": 117
          },
          {
            "id": "916351299988107364",
            "name": "zkApps-bootcamp-2021",
            "color": "#F19924",
            "position": 95
          }
        ],
        "avatarUrl": "https://cdn.discordapp.com/avatars/568421780331692042/e1669a88013d05eb102f3e9b75279562.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    },
    {
      "id": "1123618565786976266",
      "type": "Default",
      "timestamp": "2023-06-28T18:19:01.907+04:00",
      "timestampEdited": null,
      "callEndedTimestamp": null,
      "isPinned": false,
      "content": "Okay, it's too early to think about the web interface, how can I write a test for this function so that it deploys the contract, and then I can call this contract?",
      "author": {
        "id": "631608967214399509",
        "name": "whitecoon",
        "discriminator": "0000",
        "nickname": "white coon",
        "color": null,
        "isBot": false,
        "roles": [],
        "avatarUrl": "https://cdn.discordapp.com/avatars/631608967214399509/bea56f00c3b9e606510db03ade07348d.png?size=512"
      },
      "attachments": [],
      "embeds": [],
      "stickers": [],
      "reactions": [],
      "mentions": []
    }
  ],
  "messageCount": 33
}